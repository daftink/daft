<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Daft Chat</title><link rel="stylesheet" href="https://esm.sh/stream-chat-css@latest/dist/css/index.css"/><style>#root,body,html{height:100%;margin:0}</style><script defer="defer" src="/static/js/main.eb4251a9.js"></script><link href="/static/css/main.1b33437e.css" rel="stylesheet"></head><body><div id="root"></div><script type="module">import React from"https://esm.sh/react@18";import ReactDOM from"https://esm.sh/react-dom@18";import{StreamChat}from"https://esm.sh/stream-chat@9.10.0";import{Chat,ChannelList,Channel,ChannelHeader,MessageList,MessageInput,Thread,Window}from"https://esm.sh/stream-chat-react@13.2.1";const API_KEY="3nkn6wg7k7zt",USER_ID="daftuser";let activeChannel;async function init(){const e=StreamChat.getInstance(API_KEY),t=await fetch("/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:USER_ID})}),{token:a}=await t.json();await e.connectUser({id:USER_ID,name:"Daft User"},a);const n=e.channel("messaging","daft-channel",{name:"Daft Chat"});await n.create(),await n.watch(),activeChannel=n,renderApp(e)}function renderApp(e){ReactDOM.render(React.createElement(Chat,{client:e,theme:"messaging light"},React.createElement("div",{style:{display:"flex",height:"100vh"}},React.createElement("aside",{style:{width:240}},React.createElement(ChannelList,{filters:{type:"messaging"},options:{state:!0,watch:!0},onChannelSelect:t=>{activeChannel=t,renderApp(e)}})),React.createElement(Channel,{channel:activeChannel},React.createElement(Window,null,React.createElement(ChannelHeader,null),React.createElement(MessageList,null),React.createElement(MessageInput,null)),React.createElement(Thread,null)))),document.getElementById("root"))}init().catch(e=>{document.body.innerHTML='<pre style="color:red">'+e+"</pre>",console.error(e)})</script></body></html>