{"ast":null,"code":"import _objectSpread from \"/tmp/daft-chat-temp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useCallback } from 'react';\nimport { useManagePollVotesRealtime } from './useManagePollVotesRealtime';\nimport { useCursorPaginator } from '../../InfiniteScrollPaginator/hooks/useCursorPaginator';\nimport { usePollContext } from '../../../context';\nimport { useStateStore } from '../../../store';\nconst paginationStateSelector = state => [state.error, state.hasNextPage, state.loading];\nexport const usePollAnswerPagination = function () {\n  let {\n    paginationParams\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    poll\n  } = usePollContext();\n  const paginationFn = useCallback(async next => {\n    const {\n      next: newNext,\n      votes\n    } = await poll.queryAnswers({\n      filter: paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.filter,\n      options: !next ? paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.options : _objectSpread(_objectSpread({}, paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.options), {}, {\n        next\n      }),\n      sort: _objectSpread({\n        created_at: -1\n      }, paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.sort)\n    });\n    return {\n      items: votes,\n      next: newNext\n    };\n  }, [paginationParams, poll]);\n  const {\n    cursorPaginatorState,\n    loadMore\n  } = useCursorPaginator(paginationFn, true);\n  const answers = useManagePollVotesRealtime('answer', cursorPaginatorState);\n  const [error, hasNextPage, loading] = useStateStore(cursorPaginatorState, paginationStateSelector);\n  return {\n    answers,\n    error,\n    hasNextPage,\n    loading,\n    loadMore\n  };\n};","map":{"version":3,"names":["useCallback","useManagePollVotesRealtime","useCursorPaginator","usePollContext","useStateStore","paginationStateSelector","state","error","hasNextPage","loading","usePollAnswerPagination","paginationParams","arguments","length","undefined","poll","paginationFn","next","newNext","votes","queryAnswers","filter","options","_objectSpread","sort","created_at","items","cursorPaginatorState","loadMore","answers"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Poll/hooks/usePollAnswerPagination.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { useManagePollVotesRealtime } from './useManagePollVotesRealtime';\nimport { useCursorPaginator } from '../../InfiniteScrollPaginator/hooks/useCursorPaginator';\nimport { usePollContext } from '../../../context';\nimport { useStateStore } from '../../../store';\nconst paginationStateSelector = (state) => [\n    state.error,\n    state.hasNextPage,\n    state.loading,\n];\nexport const usePollAnswerPagination = ({ paginationParams, } = {}) => {\n    const { poll } = usePollContext();\n    const paginationFn = useCallback(async (next) => {\n        const { next: newNext, votes } = await poll.queryAnswers({\n            filter: paginationParams?.filter,\n            options: !next\n                ? paginationParams?.options\n                : { ...paginationParams?.options, next },\n            sort: { created_at: -1, ...paginationParams?.sort },\n        });\n        return { items: votes, next: newNext };\n    }, [paginationParams, poll]);\n    const { cursorPaginatorState, loadMore } = useCursorPaginator(paginationFn, true);\n    const answers = useManagePollVotesRealtime('answer', cursorPaginatorState);\n    const [error, hasNextPage, loading] = useStateStore(cursorPaginatorState, paginationStateSelector);\n    return {\n        answers,\n        error,\n        hasNextPage,\n        loading,\n        loadMore,\n    };\n};\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,0BAA0B,QAAQ,8BAA8B;AACzE,SAASC,kBAAkB,QAAQ,wDAAwD;AAC3F,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,MAAMC,uBAAuB,GAAIC,KAAK,IAAK,CACvCA,KAAK,CAACC,KAAK,EACXD,KAAK,CAACE,WAAW,EACjBF,KAAK,CAACG,OAAO,CAChB;AACD,OAAO,MAAMC,uBAAuB,GAAG,SAAAA,CAAA,EAAgC;EAAA,IAA/B;IAAEC;EAAkB,CAAC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAC9D,MAAM;IAAEG;EAAK,CAAC,GAAGZ,cAAc,CAAC,CAAC;EACjC,MAAMa,YAAY,GAAGhB,WAAW,CAAC,MAAOiB,IAAI,IAAK;IAC7C,MAAM;MAAEA,IAAI,EAAEC,OAAO;MAAEC;IAAM,CAAC,GAAG,MAAMJ,IAAI,CAACK,YAAY,CAAC;MACrDC,MAAM,EAAEV,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEU,MAAM;MAChCC,OAAO,EAAE,CAACL,IAAI,GACRN,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEW,OAAO,GAAAC,aAAA,CAAAA,aAAA,KACpBZ,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEW,OAAO;QAAEL;MAAI,EAAE;MAC5CO,IAAI,EAAAD,aAAA;QAAIE,UAAU,EAAE,CAAC;MAAC,GAAKd,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEa,IAAI;IACrD,CAAC,CAAC;IACF,OAAO;MAAEE,KAAK,EAAEP,KAAK;MAAEF,IAAI,EAAEC;IAAQ,CAAC;EAC1C,CAAC,EAAE,CAACP,gBAAgB,EAAEI,IAAI,CAAC,CAAC;EAC5B,MAAM;IAAEY,oBAAoB;IAAEC;EAAS,CAAC,GAAG1B,kBAAkB,CAACc,YAAY,EAAE,IAAI,CAAC;EACjF,MAAMa,OAAO,GAAG5B,0BAA0B,CAAC,QAAQ,EAAE0B,oBAAoB,CAAC;EAC1E,MAAM,CAACpB,KAAK,EAAEC,WAAW,EAAEC,OAAO,CAAC,GAAGL,aAAa,CAACuB,oBAAoB,EAAEtB,uBAAuB,CAAC;EAClG,OAAO;IACHwB,OAAO;IACPtB,KAAK;IACLC,WAAW;IACXC,OAAO;IACPmB;EACJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}