{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useEffect, useState } from 'react';\nimport { CommandItem } from './CommandItem';\nimport { EmoticonItem } from './EmoticonItem';\nimport { SuggestionListItem as DefaultSuggestionListItem } from './SuggestionListItem';\nimport { UserItem } from './UserItem';\nimport { useComponentContext } from '../../../context/ComponentContext';\nimport { useStateStore } from '../../../store';\nimport { InfiniteScrollPaginator } from '../../InfiniteScrollPaginator/InfiniteScrollPaginator';\nimport { useMessageComposer } from '../../MessageInput';\nconst textComposerStateSelector = state => ({\n  suggestions: state.suggestions\n});\nconst searchSourceStateSelector = nextValue => {\n  var _nextValue$items;\n  return {\n    items: (_nextValue$items = nextValue.items) !== null && _nextValue$items !== void 0 ? _nextValue$items : []\n  };\n};\nexport const defaultComponents = {\n  '/': props => React.createElement(CommandItem, {\n    entity: props.entity\n  }),\n  ':': props => React.createElement(EmoticonItem, {\n    entity: props.entity\n  }),\n  '@': props => React.createElement(UserItem, {\n    entity: props.entity\n  })\n};\nexport const SuggestionList = _ref => {\n  var _useStateStore;\n  let {\n    className,\n    closeOnClickOutside = true,\n    containerClassName,\n    focusedItemIndex,\n    setFocusedItemIndex,\n    suggestionItemComponents = defaultComponents\n  } = _ref;\n  const {\n    AutocompleteSuggestionItem = DefaultSuggestionListItem\n  } = useComponentContext();\n  const messageComposer = useMessageComposer();\n  const {\n    textComposer\n  } = messageComposer;\n  const {\n    suggestions\n  } = useStateStore(textComposer.state, textComposerStateSelector);\n  const {\n    items\n  } = (_useStateStore = useStateStore(suggestions === null || suggestions === void 0 ? void 0 : suggestions.searchSource.state, searchSourceStateSelector)) !== null && _useStateStore !== void 0 ? _useStateStore : {};\n  const [container, setContainer] = useState(null);\n  const component = suggestions !== null && suggestions !== void 0 && suggestions.trigger ? suggestionItemComponents[suggestions === null || suggestions === void 0 ? void 0 : suggestions.trigger] : undefined;\n  useEffect(() => {\n    if (!closeOnClickOutside || !suggestions || !container) return;\n    const handleClick = event => {\n      if (container.contains(event.target)) return;\n      textComposer.closeSuggestions();\n    };\n    document.addEventListener('click', handleClick);\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  }, [closeOnClickOutside, suggestions, container, textComposer]);\n  if (!suggestions || !(items !== null && items !== void 0 && items.length) || !component) return null;\n  return React.createElement(\"div\", {\n    className: clsx('str-chat__suggestion-list-container', containerClassName),\n    ref: setContainer\n  }, React.createElement(InfiniteScrollPaginator, {\n    loadNextOnScrollToBottom: suggestions.searchSource.search,\n    threshold: 100\n  }, React.createElement(\"ul\", {\n    className: clsx('str-chat__suggestion-list str-chat__suggestion-list--react', className)\n  }, items.map((item, i) => React.createElement(AutocompleteSuggestionItem, {\n    component: component,\n    focused: focusedItemIndex === i,\n    item: item,\n    key: item.id.toString(),\n    onMouseEnter: () => setFocusedItemIndex === null || setFocusedItemIndex === void 0 ? void 0 : setFocusedItemIndex(i)\n  })))));\n};","map":{"version":3,"names":["clsx","React","useEffect","useState","CommandItem","EmoticonItem","SuggestionListItem","DefaultSuggestionListItem","UserItem","useComponentContext","useStateStore","InfiniteScrollPaginator","useMessageComposer","textComposerStateSelector","state","suggestions","searchSourceStateSelector","nextValue","_nextValue$items","items","defaultComponents","props","createElement","entity","SuggestionList","_ref","_useStateStore","className","closeOnClickOutside","containerClassName","focusedItemIndex","setFocusedItemIndex","suggestionItemComponents","AutocompleteSuggestionItem","messageComposer","textComposer","searchSource","container","setContainer","component","trigger","undefined","handleClick","event","contains","target","closeSuggestions","document","addEventListener","removeEventListener","length","ref","loadNextOnScrollToBottom","search","threshold","map","item","i","focused","key","id","toString","onMouseEnter"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/TextareaComposer/SuggestionList/SuggestionList.js"],"sourcesContent":["import clsx from 'clsx';\nimport React, { useEffect, useState } from 'react';\nimport { CommandItem } from './CommandItem';\nimport { EmoticonItem } from './EmoticonItem';\nimport { SuggestionListItem as DefaultSuggestionListItem } from './SuggestionListItem';\nimport { UserItem } from './UserItem';\nimport { useComponentContext } from '../../../context/ComponentContext';\nimport { useStateStore } from '../../../store';\nimport { InfiniteScrollPaginator } from '../../InfiniteScrollPaginator/InfiniteScrollPaginator';\nimport { useMessageComposer } from '../../MessageInput';\nconst textComposerStateSelector = (state) => ({\n    suggestions: state.suggestions,\n});\nconst searchSourceStateSelector = (nextValue) => ({\n    items: nextValue.items ?? [],\n});\nexport const defaultComponents = {\n    '/': (props) => (React.createElement(CommandItem, { entity: props.entity })),\n    ':': (props) => (React.createElement(EmoticonItem, { entity: props.entity })),\n    '@': (props) => (React.createElement(UserItem, { entity: props.entity })),\n};\nexport const SuggestionList = ({ className, closeOnClickOutside = true, containerClassName, focusedItemIndex, setFocusedItemIndex, suggestionItemComponents = defaultComponents, }) => {\n    const { AutocompleteSuggestionItem = DefaultSuggestionListItem } = useComponentContext();\n    const messageComposer = useMessageComposer();\n    const { textComposer } = messageComposer;\n    const { suggestions } = useStateStore(textComposer.state, textComposerStateSelector);\n    const { items } = useStateStore(suggestions?.searchSource.state, searchSourceStateSelector) ?? {};\n    const [container, setContainer] = useState(null);\n    const component = suggestions?.trigger\n        ? suggestionItemComponents[suggestions?.trigger]\n        : undefined;\n    useEffect(() => {\n        if (!closeOnClickOutside || !suggestions || !container)\n            return;\n        const handleClick = (event) => {\n            if (container.contains(event.target))\n                return;\n            textComposer.closeSuggestions();\n        };\n        document.addEventListener('click', handleClick);\n        return () => {\n            document.removeEventListener('click', handleClick);\n        };\n    }, [closeOnClickOutside, suggestions, container, textComposer]);\n    if (!suggestions || !items?.length || !component)\n        return null;\n    return (React.createElement(\"div\", { className: clsx('str-chat__suggestion-list-container', containerClassName), ref: setContainer },\n        React.createElement(InfiniteScrollPaginator, { loadNextOnScrollToBottom: suggestions.searchSource.search, threshold: 100 },\n            React.createElement(\"ul\", { className: clsx('str-chat__suggestion-list str-chat__suggestion-list--react', className) }, items.map((item, i) => (React.createElement(AutocompleteSuggestionItem, { component: component, focused: focusedItemIndex === i, item: item, key: item.id.toString(), onMouseEnter: () => setFocusedItemIndex?.(i) })))))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}