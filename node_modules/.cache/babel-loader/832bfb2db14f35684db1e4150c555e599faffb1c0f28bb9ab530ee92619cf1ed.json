{"ast":null,"code":"import React, { useCallback, useState } from 'react';\nimport { PollAction } from './PollAction';\nimport { AddCommentForm as DefaultAddCommentForm } from './AddCommentForm';\nimport { SuggestPollOptionForm as DefaultSuggestPollOptionForm } from './SuggestPollOptionForm';\nimport { EndPollDialog as DefaultEndPollDialog } from './EndPollDialog';\nimport { PollAnswerList as DefaultPollAnswerList } from './PollAnswerList';\nimport { PollOptionsFullList as DefaultPollOptionsFullList } from './PollOptionsFullList';\nimport { PollResults as DefaultPollResults } from './PollResults';\nimport { MAX_OPTIONS_DISPLAYED, MAX_POLL_OPTIONS } from '../constants';\nimport { useChannelStateContext, useChatContext, useMessageContext, usePollContext, useTranslationContext } from '../../../context';\nimport { useStateStore } from '../../../store';\nconst pollStateSelector = nextValue => ({\n  allow_answers: nextValue.allow_answers,\n  allow_user_suggested_options: nextValue.allow_user_suggested_options,\n  answers_count: nextValue.answers_count,\n  created_by_id: nextValue.created_by_id,\n  is_closed: nextValue.is_closed,\n  options: nextValue.options,\n  ownAnswer: nextValue.ownAnswer\n});\nexport const PollActions = _ref => {\n  var _client$user;\n  let {\n    AddCommentForm = DefaultAddCommentForm,\n    EndPollDialog = DefaultEndPollDialog,\n    PollAnswerList = DefaultPollAnswerList,\n    PollOptionsFullList = DefaultPollOptionsFullList,\n    PollResults = DefaultPollResults,\n    SuggestPollOptionForm = DefaultSuggestPollOptionForm\n  } = _ref;\n  const {\n    client\n  } = useChatContext();\n  const {\n    t\n  } = useTranslationContext('PollActions');\n  const {\n    channelCapabilities = {}\n  } = useChannelStateContext('PollActions');\n  const {\n    message\n  } = useMessageContext('PollActions');\n  const {\n    poll\n  } = usePollContext();\n  const {\n    allow_answers,\n    allow_user_suggested_options,\n    answers_count,\n    created_by_id,\n    is_closed,\n    options,\n    ownAnswer\n  } = useStateStore(poll.state, pollStateSelector);\n  const [modalOpen, setModalOpen] = useState();\n  const closeModal = useCallback(() => setModalOpen(undefined), []);\n  const onUpdateAnswerClick = useCallback(() => setModalOpen('add-comment'), []);\n  return React.createElement(\"div\", {\n    className: 'str-chat__poll-actions'\n  }, options.length > MAX_OPTIONS_DISPLAYED && React.createElement(PollAction, {\n    buttonText: t('See all options ({{count}})', {\n      count: options.length\n    }),\n    closeModal: closeModal,\n    modalIsOpen: modalOpen === 'view-all-options',\n    openModal: () => setModalOpen('view-all-options')\n  }, React.createElement(PollOptionsFullList, {\n    close: closeModal\n  })), !is_closed && allow_user_suggested_options && options.length < MAX_POLL_OPTIONS && React.createElement(PollAction, {\n    buttonText: t('Suggest an option'),\n    closeModal: closeModal,\n    modalClassName: 'str-chat__suggest-poll-option-modal',\n    modalIsOpen: modalOpen === 'suggest-option',\n    openModal: () => setModalOpen('suggest-option')\n  }, React.createElement(SuggestPollOptionForm, {\n    close: closeModal,\n    messageId: message.id\n  })), !is_closed && allow_answers && React.createElement(PollAction, {\n    buttonText: ownAnswer ? t('Update your comment') : t('Add a comment'),\n    closeModal: closeModal,\n    modalClassName: 'str-chat__add-poll-answer-modal',\n    modalIsOpen: modalOpen === 'add-comment',\n    openModal: () => setModalOpen('add-comment')\n  }, React.createElement(AddCommentForm, {\n    close: closeModal,\n    messageId: message.id\n  })), answers_count > 0 && channelCapabilities['query-poll-votes'] && React.createElement(PollAction, {\n    buttonText: t('View {{count}} comments', {\n      count: answers_count\n    }),\n    closeModal: closeModal,\n    modalClassName: 'str-chat__poll-answer-list-modal',\n    modalIsOpen: modalOpen === 'view-comments',\n    openModal: () => setModalOpen('view-comments')\n  }, React.createElement(PollAnswerList, {\n    close: closeModal,\n    onUpdateOwnAnswerClick: onUpdateAnswerClick\n  })), React.createElement(PollAction, {\n    buttonText: t('View results'),\n    closeModal: closeModal,\n    modalClassName: 'str-chat__poll-results-modal',\n    modalIsOpen: modalOpen === 'view-results',\n    openModal: () => setModalOpen('view-results')\n  }, React.createElement(PollResults, {\n    close: closeModal\n  })), !is_closed && created_by_id === ((_client$user = client.user) === null || _client$user === void 0 ? void 0 : _client$user.id) && React.createElement(PollAction, {\n    buttonText: t('End vote'),\n    closeModal: closeModal,\n    modalClassName: 'str-chat__end-poll-modal',\n    modalIsOpen: modalOpen === 'end-vote',\n    openModal: () => setModalOpen('end-vote')\n  }, React.createElement(EndPollDialog, {\n    close: closeModal\n  })));\n};","map":{"version":3,"names":["React","useCallback","useState","PollAction","AddCommentForm","DefaultAddCommentForm","SuggestPollOptionForm","DefaultSuggestPollOptionForm","EndPollDialog","DefaultEndPollDialog","PollAnswerList","DefaultPollAnswerList","PollOptionsFullList","DefaultPollOptionsFullList","PollResults","DefaultPollResults","MAX_OPTIONS_DISPLAYED","MAX_POLL_OPTIONS","useChannelStateContext","useChatContext","useMessageContext","usePollContext","useTranslationContext","useStateStore","pollStateSelector","nextValue","allow_answers","allow_user_suggested_options","answers_count","created_by_id","is_closed","options","ownAnswer","PollActions","_ref","_client$user","client","t","channelCapabilities","message","poll","state","modalOpen","setModalOpen","closeModal","undefined","onUpdateAnswerClick","createElement","className","length","buttonText","count","modalIsOpen","openModal","close","modalClassName","messageId","id","onUpdateOwnAnswerClick","user"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Poll/PollActions/PollActions.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { PollAction } from './PollAction';\nimport { AddCommentForm as DefaultAddCommentForm } from './AddCommentForm';\nimport { SuggestPollOptionForm as DefaultSuggestPollOptionForm } from './SuggestPollOptionForm';\nimport { EndPollDialog as DefaultEndPollDialog } from './EndPollDialog';\nimport { PollAnswerList as DefaultPollAnswerList } from './PollAnswerList';\nimport { PollOptionsFullList as DefaultPollOptionsFullList } from './PollOptionsFullList';\nimport { PollResults as DefaultPollResults } from './PollResults';\nimport { MAX_OPTIONS_DISPLAYED, MAX_POLL_OPTIONS } from '../constants';\nimport { useChannelStateContext, useChatContext, useMessageContext, usePollContext, useTranslationContext, } from '../../../context';\nimport { useStateStore } from '../../../store';\nconst pollStateSelector = (nextValue) => ({\n    allow_answers: nextValue.allow_answers,\n    allow_user_suggested_options: nextValue.allow_user_suggested_options,\n    answers_count: nextValue.answers_count,\n    created_by_id: nextValue.created_by_id,\n    is_closed: nextValue.is_closed,\n    options: nextValue.options,\n    ownAnswer: nextValue.ownAnswer,\n});\nexport const PollActions = ({ AddCommentForm = DefaultAddCommentForm, EndPollDialog = DefaultEndPollDialog, PollAnswerList = DefaultPollAnswerList, PollOptionsFullList = DefaultPollOptionsFullList, PollResults = DefaultPollResults, SuggestPollOptionForm = DefaultSuggestPollOptionForm, }) => {\n    const { client } = useChatContext();\n    const { t } = useTranslationContext('PollActions');\n    const { channelCapabilities = {} } = useChannelStateContext('PollActions');\n    const { message } = useMessageContext('PollActions');\n    const { poll } = usePollContext();\n    const { allow_answers, allow_user_suggested_options, answers_count, created_by_id, is_closed, options, ownAnswer, } = useStateStore(poll.state, pollStateSelector);\n    const [modalOpen, setModalOpen] = useState();\n    const closeModal = useCallback(() => setModalOpen(undefined), []);\n    const onUpdateAnswerClick = useCallback(() => setModalOpen('add-comment'), []);\n    return (React.createElement(\"div\", { className: 'str-chat__poll-actions' },\n        options.length > MAX_OPTIONS_DISPLAYED && (React.createElement(PollAction, { buttonText: t('See all options ({{count}})', {\n                count: options.length,\n            }), closeModal: closeModal, modalIsOpen: modalOpen === 'view-all-options', openModal: () => setModalOpen('view-all-options') },\n            React.createElement(PollOptionsFullList, { close: closeModal }))),\n        !is_closed &&\n            allow_user_suggested_options &&\n            options.length < MAX_POLL_OPTIONS && (React.createElement(PollAction, { buttonText: t('Suggest an option'), closeModal: closeModal, modalClassName: 'str-chat__suggest-poll-option-modal', modalIsOpen: modalOpen === 'suggest-option', openModal: () => setModalOpen('suggest-option') },\n            React.createElement(SuggestPollOptionForm, { close: closeModal, messageId: message.id }))),\n        !is_closed && allow_answers && (React.createElement(PollAction, { buttonText: ownAnswer ? t('Update your comment') : t('Add a comment'), closeModal: closeModal, modalClassName: 'str-chat__add-poll-answer-modal', modalIsOpen: modalOpen === 'add-comment', openModal: () => setModalOpen('add-comment') },\n            React.createElement(AddCommentForm, { close: closeModal, messageId: message.id }))),\n        answers_count > 0 && channelCapabilities['query-poll-votes'] && (React.createElement(PollAction, { buttonText: t('View {{count}} comments', { count: answers_count }), closeModal: closeModal, modalClassName: 'str-chat__poll-answer-list-modal', modalIsOpen: modalOpen === 'view-comments', openModal: () => setModalOpen('view-comments') },\n            React.createElement(PollAnswerList, { close: closeModal, onUpdateOwnAnswerClick: onUpdateAnswerClick }))),\n        React.createElement(PollAction, { buttonText: t('View results'), closeModal: closeModal, modalClassName: 'str-chat__poll-results-modal', modalIsOpen: modalOpen === 'view-results', openModal: () => setModalOpen('view-results') },\n            React.createElement(PollResults, { close: closeModal })),\n        !is_closed && created_by_id === client.user?.id && (React.createElement(PollAction, { buttonText: t('End vote'), closeModal: closeModal, modalClassName: 'str-chat__end-poll-modal', modalIsOpen: modalOpen === 'end-vote', openModal: () => setModalOpen('end-vote') },\n            React.createElement(EndPollDialog, { close: closeModal })))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}