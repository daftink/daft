{"ast":null,"code":"import React from 'react';\nimport { FileSizeIndicator, PlaybackRateButton, PlayButton, WaveProgressBar } from './components';\nimport { useAudioController } from './hooks/useAudioController';\nimport { displayDuration } from './utils';\nimport { FileIcon } from '../ReactFileUtilities';\nimport { useTranslationContext } from '../../context';\nconst rootClassName = 'str-chat__message-attachment__voice-recording-widget';\nexport const VoiceRecordingPlayer = _ref => {\n  let {\n    attachment,\n    playbackRates\n  } = _ref;\n  const {\n    t\n  } = useTranslationContext('VoiceRecordingPlayer');\n  const {\n    asset_url,\n    duration = 0,\n    mime_type,\n    title = t('Voice message'),\n    waveform_data\n  } = attachment;\n  const {\n    audioRef,\n    increasePlaybackRate,\n    isPlaying,\n    playbackRate,\n    progress,\n    secondsElapsed,\n    seek,\n    togglePlay\n  } = useAudioController({\n    durationSeconds: duration !== null && duration !== void 0 ? duration : 0,\n    mimeType: mime_type,\n    playbackRates\n  });\n  if (!asset_url) return null;\n  const displayedDuration = secondsElapsed || duration;\n  return React.createElement(\"div\", {\n    className: rootClassName,\n    \"data-testid\": 'voice-recording-widget'\n  }, React.createElement(\"audio\", {\n    ref: audioRef\n  }, React.createElement(\"source\", {\n    \"data-testid\": 'audio-source',\n    src: asset_url,\n    type: mime_type\n  })), React.createElement(PlayButton, {\n    isPlaying: isPlaying,\n    onClick: togglePlay\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__metadata'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__title',\n    \"data-testid\": 'voice-recording-title',\n    title: title\n  }, title), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__audio-state'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__timer'\n  }, attachment.duration ? displayDuration(displayedDuration) : React.createElement(FileSizeIndicator, {\n    fileSize: attachment.file_size,\n    maximumFractionDigits: 0\n  })), React.createElement(WaveProgressBar, {\n    progress: progress,\n    seek: seek,\n    waveformData: waveform_data || []\n  }))), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__right-section'\n  }, isPlaying ? React.createElement(PlaybackRateButton, {\n    disabled: !audioRef.current,\n    onClick: increasePlaybackRate\n  }, playbackRate.toFixed(1), \"x\") : React.createElement(FileIcon, {\n    big: true,\n    mimeType: mime_type,\n    size: 40\n  })));\n};\nexport const QuotedVoiceRecording = _ref2 => {\n  let {\n    attachment\n  } = _ref2;\n  const {\n    t\n  } = useTranslationContext();\n  const title = attachment.title || t('Voice message');\n  return React.createElement(\"div\", {\n    className: rootClassName,\n    \"data-testid\": 'quoted-voice-recording-widget'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__metadata'\n  }, title && React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__title',\n    \"data-testid\": 'voice-recording-title',\n    title: title\n  }, title), React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__audio-state'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-attachment__voice-recording-widget__timer'\n  }, attachment.duration ? displayDuration(attachment.duration) : React.createElement(FileSizeIndicator, {\n    fileSize: attachment.file_size,\n    maximumFractionDigits: 0\n  })))), React.createElement(FileIcon, {\n    big: true,\n    mimeType: attachment.mime_type,\n    size: 34\n  }));\n};\nexport const VoiceRecording = _ref3 => {\n  let {\n    attachment,\n    isQuoted\n  } = _ref3;\n  return isQuoted ? React.createElement(QuotedVoiceRecording, {\n    attachment: attachment\n  }) : React.createElement(VoiceRecordingPlayer, {\n    attachment: attachment\n  });\n};","map":{"version":3,"names":["React","FileSizeIndicator","PlaybackRateButton","PlayButton","WaveProgressBar","useAudioController","displayDuration","FileIcon","useTranslationContext","rootClassName","VoiceRecordingPlayer","_ref","attachment","playbackRates","t","asset_url","duration","mime_type","title","waveform_data","audioRef","increasePlaybackRate","isPlaying","playbackRate","progress","secondsElapsed","seek","togglePlay","durationSeconds","mimeType","displayedDuration","createElement","className","ref","src","type","onClick","fileSize","file_size","maximumFractionDigits","waveformData","disabled","current","toFixed","big","size","QuotedVoiceRecording","_ref2","VoiceRecording","_ref3","isQuoted"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Attachment/VoiceRecording.js"],"sourcesContent":["import React from 'react';\nimport { FileSizeIndicator, PlaybackRateButton, PlayButton, WaveProgressBar, } from './components';\nimport { useAudioController } from './hooks/useAudioController';\nimport { displayDuration } from './utils';\nimport { FileIcon } from '../ReactFileUtilities';\nimport { useTranslationContext } from '../../context';\nconst rootClassName = 'str-chat__message-attachment__voice-recording-widget';\nexport const VoiceRecordingPlayer = ({ attachment, playbackRates, }) => {\n    const { t } = useTranslationContext('VoiceRecordingPlayer');\n    const { asset_url, duration = 0, mime_type, title = t('Voice message'), waveform_data, } = attachment;\n    const { audioRef, increasePlaybackRate, isPlaying, playbackRate, progress, secondsElapsed, seek, togglePlay, } = useAudioController({\n        durationSeconds: duration ?? 0,\n        mimeType: mime_type,\n        playbackRates,\n    });\n    if (!asset_url)\n        return null;\n    const displayedDuration = secondsElapsed || duration;\n    return (React.createElement(\"div\", { className: rootClassName, \"data-testid\": 'voice-recording-widget' },\n        React.createElement(\"audio\", { ref: audioRef },\n            React.createElement(\"source\", { \"data-testid\": 'audio-source', src: asset_url, type: mime_type })),\n        React.createElement(PlayButton, { isPlaying: isPlaying, onClick: togglePlay }),\n        React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__metadata' },\n            React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__title', \"data-testid\": 'voice-recording-title', title: title }, title),\n            React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__audio-state' },\n                React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__timer' }, attachment.duration ? (displayDuration(displayedDuration)) : (React.createElement(FileSizeIndicator, { fileSize: attachment.file_size, maximumFractionDigits: 0 }))),\n                React.createElement(WaveProgressBar, { progress: progress, seek: seek, waveformData: waveform_data || [] }))),\n        React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__right-section' }, isPlaying ? (React.createElement(PlaybackRateButton, { disabled: !audioRef.current, onClick: increasePlaybackRate },\n            playbackRate.toFixed(1),\n            \"x\")) : (React.createElement(FileIcon, { big: true, mimeType: mime_type, size: 40 })))));\n};\nexport const QuotedVoiceRecording = ({ attachment }) => {\n    const { t } = useTranslationContext();\n    const title = attachment.title || t('Voice message');\n    return (React.createElement(\"div\", { className: rootClassName, \"data-testid\": 'quoted-voice-recording-widget' },\n        React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__metadata' },\n            title && (React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__title', \"data-testid\": 'voice-recording-title', title: title }, title)),\n            React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__audio-state' },\n                React.createElement(\"div\", { className: 'str-chat__message-attachment__voice-recording-widget__timer' }, attachment.duration ? (displayDuration(attachment.duration)) : (React.createElement(FileSizeIndicator, { fileSize: attachment.file_size, maximumFractionDigits: 0 }))))),\n        React.createElement(FileIcon, { big: true, mimeType: attachment.mime_type, size: 34 })));\n};\nexport const VoiceRecording = ({ attachment, isQuoted }) => isQuoted ? (React.createElement(QuotedVoiceRecording, { attachment: attachment })) : (React.createElement(VoiceRecordingPlayer, { attachment: attachment }));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}