{"ast":null,"code":"import { useMemo } from 'react';\nimport { isDate, isDayOrMoment } from '../../../i18n';\nexport const useCreateChannelStateContext = value => {\n  var _channel$lastRead, _channel$data;\n  const {\n    channel,\n    channelCapabilitiesArray = [],\n    channelConfig,\n    channelUnreadUiState,\n    error,\n    giphyVersion,\n    hasMore,\n    hasMoreNewer,\n    highlightedMessageId,\n    imageAttachmentSizeHandler,\n    loading,\n    loadingMore,\n    members,\n    messages = [],\n    mutes,\n    notifications,\n    pinnedMessages,\n    read = {},\n    shouldGenerateVideoThumbnail,\n    skipMessageDataMemoization,\n    suppressAutoscroll,\n    thread,\n    threadHasMore,\n    threadLoadingMore,\n    threadMessages = [],\n    videoAttachmentSizeHandler,\n    watcher_count,\n    watcherCount,\n    watchers\n  } = value;\n  const channelId = channel.cid;\n  const lastRead = channel.initialized && ((_channel$lastRead = channel.lastRead()) === null || _channel$lastRead === void 0 ? void 0 : _channel$lastRead.getTime());\n  const membersLength = Object.keys(members || []).length;\n  const notificationsLength = notifications.length;\n  const readUsers = Object.values(read);\n  const readUsersLength = readUsers.length;\n  const readUsersLastReads = readUsers.map(_ref => {\n    let {\n      last_read\n    } = _ref;\n    return last_read.toISOString();\n  }).join();\n  const threadMessagesLength = threadMessages === null || threadMessages === void 0 ? void 0 : threadMessages.length;\n  const channelCapabilities = {};\n  channelCapabilitiesArray.forEach(capability => {\n    channelCapabilities[capability] = true;\n  });\n  const memoizedMessageData = skipMessageDataMemoization ? messages : messages.map(_ref2 => {\n    let {\n      deleted_at,\n      latest_reactions,\n      pinned,\n      reply_count,\n      status,\n      updated_at,\n      user\n    } = _ref2;\n    return \"\".concat(deleted_at).concat(latest_reactions ? latest_reactions.map(_ref3 => {\n      let {\n        type\n      } = _ref3;\n      return type;\n    }).join() : '').concat(pinned).concat(reply_count).concat(status).concat(updated_at && (isDayOrMoment(updated_at) || isDate(updated_at)) ? updated_at.toISOString() : updated_at || '').concat(user === null || user === void 0 ? void 0 : user.updated_at);\n  }).join();\n  const memoizedThreadMessageData = threadMessages.map(_ref4 => {\n    let {\n      deleted_at,\n      latest_reactions,\n      pinned,\n      status,\n      updated_at,\n      user\n    } = _ref4;\n    return \"\".concat(deleted_at).concat(latest_reactions ? latest_reactions.map(_ref5 => {\n      let {\n        type\n      } = _ref5;\n      return type;\n    }).join() : '').concat(pinned).concat(status).concat(updated_at && (isDayOrMoment(updated_at) || isDate(updated_at)) ? updated_at.toISOString() : updated_at || '').concat(user === null || user === void 0 ? void 0 : user.updated_at);\n  }).join();\n  const channelStateContext = useMemo(() => ({\n    channel,\n    channelCapabilities,\n    channelConfig,\n    channelUnreadUiState,\n    error,\n    giphyVersion,\n    hasMore,\n    hasMoreNewer,\n    highlightedMessageId,\n    imageAttachmentSizeHandler,\n    loading,\n    loadingMore,\n    members,\n    messages,\n    mutes,\n    notifications,\n    pinnedMessages,\n    read,\n    shouldGenerateVideoThumbnail,\n    suppressAutoscroll,\n    thread,\n    threadHasMore,\n    threadLoadingMore,\n    threadMessages,\n    videoAttachmentSizeHandler,\n    watcher_count,\n    watcherCount,\n    watchers\n  }),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [(_channel$data = channel.data) === null || _channel$data === void 0 ? void 0 : _channel$data.name,\n  // otherwise ChannelHeader will not be updated\n  channelId, channelUnreadUiState, error, hasMore, hasMoreNewer, highlightedMessageId, lastRead, loading, loadingMore, membersLength, memoizedMessageData, memoizedThreadMessageData, notificationsLength, readUsersLength, readUsersLastReads, shouldGenerateVideoThumbnail, skipMessageDataMemoization, suppressAutoscroll, thread, threadHasMore, threadLoadingMore, threadMessagesLength, watcherCount]);\n  return channelStateContext;\n};","map":{"version":3,"names":["useMemo","isDate","isDayOrMoment","useCreateChannelStateContext","value","_channel$lastRead","_channel$data","channel","channelCapabilitiesArray","channelConfig","channelUnreadUiState","error","giphyVersion","hasMore","hasMoreNewer","highlightedMessageId","imageAttachmentSizeHandler","loading","loadingMore","members","messages","mutes","notifications","pinnedMessages","read","shouldGenerateVideoThumbnail","skipMessageDataMemoization","suppressAutoscroll","thread","threadHasMore","threadLoadingMore","threadMessages","videoAttachmentSizeHandler","watcher_count","watcherCount","watchers","channelId","cid","lastRead","initialized","getTime","membersLength","Object","keys","length","notificationsLength","readUsers","values","readUsersLength","readUsersLastReads","map","_ref","last_read","toISOString","join","threadMessagesLength","channelCapabilities","forEach","capability","memoizedMessageData","_ref2","deleted_at","latest_reactions","pinned","reply_count","status","updated_at","user","concat","_ref3","type","memoizedThreadMessageData","_ref4","_ref5","channelStateContext","data","name"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Channel/hooks/useCreateChannelStateContext.js"],"sourcesContent":["import { useMemo } from 'react';\nimport { isDate, isDayOrMoment } from '../../../i18n';\nexport const useCreateChannelStateContext = (value) => {\n    const { channel, channelCapabilitiesArray = [], channelConfig, channelUnreadUiState, error, giphyVersion, hasMore, hasMoreNewer, highlightedMessageId, imageAttachmentSizeHandler, loading, loadingMore, members, messages = [], mutes, notifications, pinnedMessages, read = {}, shouldGenerateVideoThumbnail, skipMessageDataMemoization, suppressAutoscroll, thread, threadHasMore, threadLoadingMore, threadMessages = [], videoAttachmentSizeHandler, watcher_count, watcherCount, watchers, } = value;\n    const channelId = channel.cid;\n    const lastRead = channel.initialized && channel.lastRead()?.getTime();\n    const membersLength = Object.keys(members || []).length;\n    const notificationsLength = notifications.length;\n    const readUsers = Object.values(read);\n    const readUsersLength = readUsers.length;\n    const readUsersLastReads = readUsers\n        .map(({ last_read }) => last_read.toISOString())\n        .join();\n    const threadMessagesLength = threadMessages?.length;\n    const channelCapabilities = {};\n    channelCapabilitiesArray.forEach((capability) => {\n        channelCapabilities[capability] = true;\n    });\n    const memoizedMessageData = skipMessageDataMemoization\n        ? messages\n        : messages\n            .map(({ deleted_at, latest_reactions, pinned, reply_count, status, updated_at, user, }) => `${deleted_at}${latest_reactions ? latest_reactions.map(({ type }) => type).join() : ''}${pinned}${reply_count}${status}${updated_at && (isDayOrMoment(updated_at) || isDate(updated_at))\n            ? updated_at.toISOString()\n            : updated_at || ''}${user?.updated_at}`)\n            .join();\n    const memoizedThreadMessageData = threadMessages\n        .map(({ deleted_at, latest_reactions, pinned, status, updated_at, user }) => `${deleted_at}${latest_reactions ? latest_reactions.map(({ type }) => type).join() : ''}${pinned}${status}${updated_at && (isDayOrMoment(updated_at) || isDate(updated_at))\n        ? updated_at.toISOString()\n        : updated_at || ''}${user?.updated_at}`)\n        .join();\n    const channelStateContext = useMemo(() => ({\n        channel,\n        channelCapabilities,\n        channelConfig,\n        channelUnreadUiState,\n        error,\n        giphyVersion,\n        hasMore,\n        hasMoreNewer,\n        highlightedMessageId,\n        imageAttachmentSizeHandler,\n        loading,\n        loadingMore,\n        members,\n        messages,\n        mutes,\n        notifications,\n        pinnedMessages,\n        read,\n        shouldGenerateVideoThumbnail,\n        suppressAutoscroll,\n        thread,\n        threadHasMore,\n        threadLoadingMore,\n        threadMessages,\n        videoAttachmentSizeHandler,\n        watcher_count,\n        watcherCount,\n        watchers,\n    }), \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        channel.data?.name, // otherwise ChannelHeader will not be updated\n        channelId,\n        channelUnreadUiState,\n        error,\n        hasMore,\n        hasMoreNewer,\n        highlightedMessageId,\n        lastRead,\n        loading,\n        loadingMore,\n        membersLength,\n        memoizedMessageData,\n        memoizedThreadMessageData,\n        notificationsLength,\n        readUsersLength,\n        readUsersLastReads,\n        shouldGenerateVideoThumbnail,\n        skipMessageDataMemoization,\n        suppressAutoscroll,\n        thread,\n        threadHasMore,\n        threadLoadingMore,\n        threadMessagesLength,\n        watcherCount,\n    ]);\n    return channelStateContext;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}