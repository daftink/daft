{"ast":null,"code":"import _objectSpread from \"/tmp/daft-chat-temp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport React, { useCallback, useState } from 'react';\nimport clsx from 'clsx';\nimport { FieldError } from '../Form/FieldError';\nimport { useTranslationContext } from '../../context';\nexport const FormDialog = _ref => {\n  let {\n    className,\n    close,\n    fields,\n    onSubmit,\n    shouldDisableSubmitButton,\n    title\n  } = _ref;\n  const {\n    t\n  } = useTranslationContext();\n  const [fieldErrors, setFieldErrors] = useState({});\n  const [value, setValue] = useState(() => {\n    let acc = {};\n    for (const [id, config] of Object.entries(fields)) {\n      acc = _objectSpread(_objectSpread({}, acc), {}, {\n        [id]: config.props.value\n      });\n    }\n    return acc;\n  });\n  const handleChange = useCallback(event => {\n    var _fieldConfig$validato;\n    const fieldId = event.target.id;\n    const fieldConfig = fields[fieldId];\n    if (!fieldConfig) return;\n    const error = (_fieldConfig$validato = fieldConfig.validator) === null || _fieldConfig$validato === void 0 ? void 0 : _fieldConfig$validato.call(fieldConfig, event.target.value);\n    if (error) {\n      setFieldErrors(prev => _objectSpread({\n        [fieldId]: error\n      }, prev));\n    } else {\n      setFieldErrors(prev => {\n        delete prev[fieldId];\n        return prev;\n      });\n    }\n    setValue(prev => _objectSpread(_objectSpread({}, prev), {}, {\n      [fieldId]: event.target.value\n    }));\n    if (!fieldConfig.props.onChange) return;\n    if (fieldConfig.element === 'input') {\n      fieldConfig.props.onChange(event);\n    } else if (fieldConfig.element === 'textarea') {\n      fieldConfig.props.onChange(event);\n    }\n  }, [fields]);\n  const handleSubmit = async () => {\n    if (!Object.keys(value).length) return;\n    const errors = {};\n    for (const [id, fieldValue] of Object.entries(value)) {\n      var _fields$id$validator, _fields$id;\n      const thisFieldError = (_fields$id$validator = (_fields$id = fields[id]).validator) === null || _fields$id$validator === void 0 ? void 0 : _fields$id$validator.call(_fields$id, fieldValue);\n      if (thisFieldError) {\n        errors[id] = thisFieldError;\n      }\n    }\n    if (Object.keys(errors).length) {\n      setFieldErrors(errors);\n      return;\n    }\n    await onSubmit(value);\n    close();\n  };\n  return React.createElement(\"div\", {\n    className: clsx('str-chat__dialog str-chat__dialog--form', className)\n  }, React.createElement(\"div\", {\n    className: 'str-chat__dialog__body'\n  }, title && React.createElement(\"div\", {\n    className: 'str-chat__dialog__title'\n  }, title), React.createElement(\"form\", {\n    autoComplete: 'off',\n    onSubmit: e => {\n      e.preventDefault();\n      handleSubmit();\n    }\n  }, Object.entries(fields).map(_ref2 => {\n    var _fieldErrors$id;\n    let [id, fieldConfig] = _ref2;\n    return React.createElement(\"div\", {\n      className: 'str-chat__dialog__field',\n      key: \"dialog-field-\".concat(id)\n    }, fieldConfig.label && React.createElement(\"label\", {\n      className: clsx(\"str-chat__dialog__title str-chat__dialog__title--\".concat(id)),\n      htmlFor: id\n    }, fieldConfig.label), React.createElement(fieldConfig.element, _objectSpread(_objectSpread({\n      id\n    }, fieldConfig.props), {}, {\n      onChange: handleChange,\n      value: value[id]\n    })), React.createElement(FieldError, {\n      text: (_fieldErrors$id = fieldErrors[id]) === null || _fieldErrors$id === void 0 ? void 0 : _fieldErrors$id.message\n    }));\n  }), React.createElement(\"div\", {\n    className: 'str-chat__dialog__controls'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--cancel',\n    onClick: close\n  }, t('Cancel')), React.createElement(\"button\", {\n    className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--submit',\n    disabled: Object.keys(fieldErrors).length > 0 || (shouldDisableSubmitButton === null || shouldDisableSubmitButton === void 0 ? void 0 : shouldDisableSubmitButton(value)),\n    type: 'submit'\n  }, t('Send'))))));\n};","map":{"version":3,"names":["React","useCallback","useState","clsx","FieldError","useTranslationContext","FormDialog","_ref","className","close","fields","onSubmit","shouldDisableSubmitButton","title","t","fieldErrors","setFieldErrors","value","setValue","acc","id","config","Object","entries","_objectSpread","props","handleChange","event","_fieldConfig$validato","fieldId","target","fieldConfig","error","validator","call","prev","onChange","element","handleSubmit","keys","length","errors","fieldValue","_fields$id$validator","_fields$id","thisFieldError","createElement","autoComplete","e","preventDefault","map","_ref2","_fieldErrors$id","key","concat","label","htmlFor","text","message","onClick","disabled","type"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Dialog/FormDialog.js"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport clsx from 'clsx';\nimport { FieldError } from '../Form/FieldError';\nimport { useTranslationContext } from '../../context';\nexport const FormDialog = ({ className, close, fields, onSubmit, shouldDisableSubmitButton, title, }) => {\n    const { t } = useTranslationContext();\n    const [fieldErrors, setFieldErrors] = useState({});\n    const [value, setValue] = useState(() => {\n        let acc = {};\n        for (const [id, config] of Object.entries(fields)) {\n            acc = { ...acc, [id]: config.props.value };\n        }\n        return acc;\n    });\n    const handleChange = useCallback((event) => {\n        const fieldId = event.target.id;\n        const fieldConfig = fields[fieldId];\n        if (!fieldConfig)\n            return;\n        const error = fieldConfig.validator?.(event.target.value);\n        if (error) {\n            setFieldErrors((prev) => ({ [fieldId]: error, ...prev }));\n        }\n        else {\n            setFieldErrors((prev) => {\n                delete prev[fieldId];\n                return prev;\n            });\n        }\n        setValue((prev) => ({ ...prev, [fieldId]: event.target.value }));\n        if (!fieldConfig.props.onChange)\n            return;\n        if (fieldConfig.element === 'input') {\n            fieldConfig.props.onChange(event);\n        }\n        else if (fieldConfig.element === 'textarea') {\n            fieldConfig.props.onChange(event);\n        }\n    }, [fields]);\n    const handleSubmit = async () => {\n        if (!Object.keys(value).length)\n            return;\n        const errors = {};\n        for (const [id, fieldValue] of Object.entries(value)) {\n            const thisFieldError = fields[id].validator?.(fieldValue);\n            if (thisFieldError) {\n                errors[id] = thisFieldError;\n            }\n        }\n        if (Object.keys(errors).length) {\n            setFieldErrors(errors);\n            return;\n        }\n        await onSubmit(value);\n        close();\n    };\n    return (React.createElement(\"div\", { className: clsx('str-chat__dialog str-chat__dialog--form', className) },\n        React.createElement(\"div\", { className: 'str-chat__dialog__body' },\n            title && React.createElement(\"div\", { className: 'str-chat__dialog__title' }, title),\n            React.createElement(\"form\", { autoComplete: 'off', onSubmit: (e) => {\n                    e.preventDefault();\n                    handleSubmit();\n                } },\n                Object.entries(fields).map(([id, fieldConfig]) => (React.createElement(\"div\", { className: 'str-chat__dialog__field', key: `dialog-field-${id}` },\n                    fieldConfig.label && (React.createElement(\"label\", { className: clsx(`str-chat__dialog__title str-chat__dialog__title--${id}`), htmlFor: id }, fieldConfig.label)),\n                    React.createElement(fieldConfig.element, {\n                        id,\n                        ...fieldConfig.props,\n                        onChange: handleChange,\n                        value: value[id],\n                    }),\n                    React.createElement(FieldError, { text: fieldErrors[id]?.message })))),\n                React.createElement(\"div\", { className: 'str-chat__dialog__controls' },\n                    React.createElement(\"button\", { className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--cancel', onClick: close }, t('Cancel')),\n                    React.createElement(\"button\", { className: 'str-chat__dialog__controls-button str-chat__dialog__controls-button--submit', disabled: Object.keys(fieldErrors).length > 0 || shouldDisableSubmitButton?.(value), type: 'submit' }, t('Send')))))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}