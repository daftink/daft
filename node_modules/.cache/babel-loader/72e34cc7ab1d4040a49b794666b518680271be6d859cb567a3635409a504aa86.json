{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useMemo } from 'react';\nimport { QuotedMessage as DefaultQuotedMessage } from './QuotedMessage';\nimport { isOnlyEmojis, messageHasAttachments } from './utils';\nimport { useComponentContext, useMessageContext, useTranslationContext } from '../../context';\nimport { renderText as defaultRenderText } from './renderText';\nimport { MessageErrorText } from './MessageErrorText';\nconst UnMemoizedMessageTextComponent = props => {\n  var _ref, _message$i18n;\n  const {\n    customInnerClass,\n    customWrapperClass = '',\n    message: propMessage,\n    renderText: propsRenderText,\n    theme = 'simple'\n  } = props;\n  const {\n    QuotedMessage = DefaultQuotedMessage\n  } = useComponentContext('MessageText');\n  const {\n    message: contextMessage,\n    onMentionsClickMessage,\n    onMentionsHoverMessage,\n    renderText: contextRenderText,\n    unsafeHTML\n  } = useMessageContext('MessageText');\n  const renderText = (_ref = propsRenderText !== null && propsRenderText !== void 0 ? propsRenderText : contextRenderText) !== null && _ref !== void 0 ? _ref : defaultRenderText;\n  const {\n    userLanguage\n  } = useTranslationContext('MessageText');\n  const message = propMessage || contextMessage;\n  const hasAttachment = messageHasAttachments(message);\n  const messageTextToRender = ((_message$i18n = message.i18n) === null || _message$i18n === void 0 ? void 0 : _message$i18n[\"\".concat(userLanguage, \"_text\")]) || message.text;\n  const messageText = useMemo(() => renderText(messageTextToRender, message.mentioned_users),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [message.mentioned_users, messageTextToRender]);\n  const wrapperClass = customWrapperClass || 'str-chat__message-text';\n  const innerClass = customInnerClass || \"str-chat__message-text-inner str-chat__message-\".concat(theme, \"-text-inner\");\n  if (!messageTextToRender && !message.quoted_message) return null;\n  return React.createElement(\"div\", {\n    className: wrapperClass,\n    tabIndex: 0\n  }, React.createElement(\"div\", {\n    className: clsx(innerClass, {\n      [\"str-chat__message-\".concat(theme, \"-text-inner--has-attachment\")]: hasAttachment,\n      [\" str-chat__message-\".concat(theme, \"-text-inner--is-emoji\")]: isOnlyEmojis(message.text) && !message.quoted_message\n    }),\n    \"data-testid\": 'message-text-inner-wrapper',\n    onClick: onMentionsClickMessage,\n    onMouseOver: onMentionsHoverMessage\n  }, message.quoted_message && React.createElement(QuotedMessage, null), React.createElement(MessageErrorText, {\n    message: message,\n    theme: theme\n  }), unsafeHTML && message.html ? React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }) : React.createElement(\"div\", null, messageText)));\n};\nexport const MessageText = React.memo(UnMemoizedMessageTextComponent);","map":{"version":3,"names":["clsx","React","useMemo","QuotedMessage","DefaultQuotedMessage","isOnlyEmojis","messageHasAttachments","useComponentContext","useMessageContext","useTranslationContext","renderText","defaultRenderText","MessageErrorText","UnMemoizedMessageTextComponent","props","_ref","_message$i18n","customInnerClass","customWrapperClass","message","propMessage","propsRenderText","theme","contextMessage","onMentionsClickMessage","onMentionsHoverMessage","contextRenderText","unsafeHTML","userLanguage","hasAttachment","messageTextToRender","i18n","concat","text","messageText","mentioned_users","wrapperClass","innerClass","quoted_message","createElement","className","tabIndex","onClick","onMouseOver","html","dangerouslySetInnerHTML","__html","MessageText","memo"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Message/MessageText.js"],"sourcesContent":["import clsx from 'clsx';\nimport React, { useMemo } from 'react';\nimport { QuotedMessage as DefaultQuotedMessage } from './QuotedMessage';\nimport { isOnlyEmojis, messageHasAttachments } from './utils';\nimport { useComponentContext, useMessageContext, useTranslationContext, } from '../../context';\nimport { renderText as defaultRenderText } from './renderText';\nimport { MessageErrorText } from './MessageErrorText';\nconst UnMemoizedMessageTextComponent = (props) => {\n    const { customInnerClass, customWrapperClass = '', message: propMessage, renderText: propsRenderText, theme = 'simple', } = props;\n    const { QuotedMessage = DefaultQuotedMessage } = useComponentContext('MessageText');\n    const { message: contextMessage, onMentionsClickMessage, onMentionsHoverMessage, renderText: contextRenderText, unsafeHTML, } = useMessageContext('MessageText');\n    const renderText = propsRenderText ?? contextRenderText ?? defaultRenderText;\n    const { userLanguage } = useTranslationContext('MessageText');\n    const message = propMessage || contextMessage;\n    const hasAttachment = messageHasAttachments(message);\n    const messageTextToRender = message.i18n?.[`${userLanguage}_text`] ||\n        message.text;\n    const messageText = useMemo(() => renderText(messageTextToRender, message.mentioned_users), \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [message.mentioned_users, messageTextToRender]);\n    const wrapperClass = customWrapperClass || 'str-chat__message-text';\n    const innerClass = customInnerClass ||\n        `str-chat__message-text-inner str-chat__message-${theme}-text-inner`;\n    if (!messageTextToRender && !message.quoted_message)\n        return null;\n    return (React.createElement(\"div\", { className: wrapperClass, tabIndex: 0 },\n        React.createElement(\"div\", { className: clsx(innerClass, {\n                [`str-chat__message-${theme}-text-inner--has-attachment`]: hasAttachment,\n                [` str-chat__message-${theme}-text-inner--is-emoji`]: isOnlyEmojis(message.text) && !message.quoted_message,\n            }), \"data-testid\": 'message-text-inner-wrapper', onClick: onMentionsClickMessage, onMouseOver: onMentionsHoverMessage },\n            message.quoted_message && React.createElement(QuotedMessage, null),\n            React.createElement(MessageErrorText, { message: message, theme: theme }),\n            unsafeHTML && message.html ? (React.createElement(\"div\", { dangerouslySetInnerHTML: { __html: message.html } })) : (React.createElement(\"div\", null, messageText)))));\n};\nexport const MessageText = React.memo(UnMemoizedMessageTextComponent);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}