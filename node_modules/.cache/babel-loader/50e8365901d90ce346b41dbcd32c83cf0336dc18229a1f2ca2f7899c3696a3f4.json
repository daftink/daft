{"ast":null,"code":"import { validateAndGetMessage } from '../utils';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\nexport const missingUseFlagHandlerParameterWarning = 'useFlagHandler was called but it is missing one or more necessary parameters.';\nexport const useFlagHandler = function (message) {\n  let notifications = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    client\n  } = useChatContext('useFlagHandler');\n  const {\n    t\n  } = useTranslationContext('useFlagHandler');\n  return async event => {\n    var _client$user;\n    event.preventDefault();\n    const {\n      getErrorNotification,\n      getSuccessNotification,\n      notify\n    } = notifications;\n    if (!client || !t || !notify || !(message !== null && message !== void 0 && message.id)) {\n      console.warn(missingUseFlagHandlerParameterWarning);\n      return;\n    }\n    if ((_client$user = client.user) !== null && _client$user !== void 0 && _client$user.banned) {\n      return notify(t('Error adding flag'), 'error');\n    }\n    try {\n      await client.flagMessage(message.id);\n      const successMessage = getSuccessNotification && validateAndGetMessage(getSuccessNotification, [message]);\n      notify(successMessage || t('Message has been successfully flagged'), 'success');\n    } catch (e) {\n      const errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n      notify(errorMessage || t('Error adding flag'), 'error');\n    }\n  };\n};","map":{"version":3,"names":["validateAndGetMessage","useChatContext","useTranslationContext","missingUseFlagHandlerParameterWarning","useFlagHandler","message","notifications","arguments","length","undefined","client","t","event","_client$user","preventDefault","getErrorNotification","getSuccessNotification","notify","id","console","warn","user","banned","flagMessage","successMessage","e","errorMessage"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Message/hooks/useFlagHandler.js"],"sourcesContent":["import { validateAndGetMessage } from '../utils';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\nexport const missingUseFlagHandlerParameterWarning = 'useFlagHandler was called but it is missing one or more necessary parameters.';\nexport const useFlagHandler = (message, notifications = {}) => {\n    const { client } = useChatContext('useFlagHandler');\n    const { t } = useTranslationContext('useFlagHandler');\n    return async (event) => {\n        event.preventDefault();\n        const { getErrorNotification, getSuccessNotification, notify } = notifications;\n        if (!client || !t || !notify || !message?.id) {\n            console.warn(missingUseFlagHandlerParameterWarning);\n            return;\n        }\n        if (client.user?.banned) {\n            return notify(t('Error adding flag'), 'error');\n        }\n        try {\n            await client.flagMessage(message.id);\n            const successMessage = getSuccessNotification &&\n                validateAndGetMessage(getSuccessNotification, [message]);\n            notify(successMessage || t('Message has been successfully flagged'), 'success');\n        }\n        catch (e) {\n            const errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            notify(errorMessage || t('Error adding flag'), 'error');\n        }\n    };\n};\n"],"mappings":"AAAA,SAASA,qBAAqB,QAAQ,UAAU;AAChD,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,SAASC,qBAAqB,QAAQ,qCAAqC;AAC3E,OAAO,MAAMC,qCAAqC,GAAG,+EAA+E;AACpI,OAAO,MAAMC,cAAc,GAAG,SAAAA,CAACC,OAAO,EAAyB;EAAA,IAAvBC,aAAa,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACtD,MAAM;IAAEG;EAAO,CAAC,GAAGT,cAAc,CAAC,gBAAgB,CAAC;EACnD,MAAM;IAAEU;EAAE,CAAC,GAAGT,qBAAqB,CAAC,gBAAgB,CAAC;EACrD,OAAO,MAAOU,KAAK,IAAK;IAAA,IAAAC,YAAA;IACpBD,KAAK,CAACE,cAAc,CAAC,CAAC;IACtB,MAAM;MAAEC,oBAAoB;MAAEC,sBAAsB;MAAEC;IAAO,CAAC,GAAGX,aAAa;IAC9E,IAAI,CAACI,MAAM,IAAI,CAACC,CAAC,IAAI,CAACM,MAAM,IAAI,EAACZ,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEa,EAAE,GAAE;MAC1CC,OAAO,CAACC,IAAI,CAACjB,qCAAqC,CAAC;MACnD;IACJ;IACA,KAAAU,YAAA,GAAIH,MAAM,CAACW,IAAI,cAAAR,YAAA,eAAXA,YAAA,CAAaS,MAAM,EAAE;MACrB,OAAOL,MAAM,CAACN,CAAC,CAAC,mBAAmB,CAAC,EAAE,OAAO,CAAC;IAClD;IACA,IAAI;MACA,MAAMD,MAAM,CAACa,WAAW,CAAClB,OAAO,CAACa,EAAE,CAAC;MACpC,MAAMM,cAAc,GAAGR,sBAAsB,IACzChB,qBAAqB,CAACgB,sBAAsB,EAAE,CAACX,OAAO,CAAC,CAAC;MAC5DY,MAAM,CAACO,cAAc,IAAIb,CAAC,CAAC,uCAAuC,CAAC,EAAE,SAAS,CAAC;IACnF,CAAC,CACD,OAAOc,CAAC,EAAE;MACN,MAAMC,YAAY,GAAGX,oBAAoB,IAAIf,qBAAqB,CAACe,oBAAoB,EAAE,CAACV,OAAO,CAAC,CAAC;MACnGY,MAAM,CAACS,YAAY,IAAIf,CAAC,CAAC,mBAAmB,CAAC,EAAE,OAAO,CAAC;IAC3D;EACJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}