{"ast":null,"code":"import { useMemo } from 'react';\nimport { getGroupStyles, insertIntro, processMessages } from '../../utils';\nimport { useChatContext } from '../../../../context/ChatContext';\nimport { useComponentContext } from '../../../../context/ComponentContext';\nexport const useEnrichedMessages = args => {\n  const {\n    channel,\n    disableDateSeparator,\n    groupStyles,\n    headerPosition,\n    hideDeletedMessages,\n    hideNewMessageSeparator,\n    maxTimeBetweenGroupedMessages,\n    messages,\n    noGroupByUser,\n    reviewProcessedMessage\n  } = args;\n  const {\n    client\n  } = useChatContext('useEnrichedMessages');\n  const {\n    HeaderComponent\n  } = useComponentContext('useEnrichedMessages');\n  const lastRead = useMemo(() => {\n    var _channel$lastRead;\n    return (_channel$lastRead = channel.lastRead) === null || _channel$lastRead === void 0 ? void 0 : _channel$lastRead.call(channel);\n  }, [channel]);\n  const enableDateSeparator = !disableDateSeparator;\n  let messagesWithDates = !enableDateSeparator && !hideDeletedMessages && hideNewMessageSeparator ? messages : processMessages({\n    enableDateSeparator,\n    hideDeletedMessages,\n    hideNewMessageSeparator,\n    lastRead,\n    messages,\n    reviewProcessedMessage,\n    userId: client.userID || ''\n  });\n  if (HeaderComponent) {\n    messagesWithDates = insertIntro(messagesWithDates, headerPosition);\n  }\n  const groupStylesFn = groupStyles || getGroupStyles;\n  const messageGroupStyles = useMemo(() => messagesWithDates.reduce((acc, message, i) => {\n    const style = groupStylesFn(message, messagesWithDates[i - 1], messagesWithDates[i + 1], noGroupByUser, maxTimeBetweenGroupedMessages);\n    if (style) acc[message.id] = style;\n    return acc;\n  }, {}),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [maxTimeBetweenGroupedMessages, messagesWithDates, noGroupByUser]);\n  return {\n    messageGroupStyles,\n    messages: messagesWithDates\n  };\n};","map":{"version":3,"names":["useMemo","getGroupStyles","insertIntro","processMessages","useChatContext","useComponentContext","useEnrichedMessages","args","channel","disableDateSeparator","groupStyles","headerPosition","hideDeletedMessages","hideNewMessageSeparator","maxTimeBetweenGroupedMessages","messages","noGroupByUser","reviewProcessedMessage","client","HeaderComponent","lastRead","_channel$lastRead","call","enableDateSeparator","messagesWithDates","userId","userID","groupStylesFn","messageGroupStyles","reduce","acc","message","i","style","id"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/MessageList/hooks/MessageList/useEnrichedMessages.js"],"sourcesContent":["import { useMemo } from 'react';\nimport { getGroupStyles, insertIntro, processMessages } from '../../utils';\nimport { useChatContext } from '../../../../context/ChatContext';\nimport { useComponentContext } from '../../../../context/ComponentContext';\nexport const useEnrichedMessages = (args) => {\n    const { channel, disableDateSeparator, groupStyles, headerPosition, hideDeletedMessages, hideNewMessageSeparator, maxTimeBetweenGroupedMessages, messages, noGroupByUser, reviewProcessedMessage, } = args;\n    const { client } = useChatContext('useEnrichedMessages');\n    const { HeaderComponent } = useComponentContext('useEnrichedMessages');\n    const lastRead = useMemo(() => channel.lastRead?.(), [channel]);\n    const enableDateSeparator = !disableDateSeparator;\n    let messagesWithDates = !enableDateSeparator && !hideDeletedMessages && hideNewMessageSeparator\n        ? messages\n        : processMessages({\n            enableDateSeparator,\n            hideDeletedMessages,\n            hideNewMessageSeparator,\n            lastRead,\n            messages,\n            reviewProcessedMessage,\n            userId: client.userID || '',\n        });\n    if (HeaderComponent) {\n        messagesWithDates = insertIntro(messagesWithDates, headerPosition);\n    }\n    const groupStylesFn = groupStyles || getGroupStyles;\n    const messageGroupStyles = useMemo(() => messagesWithDates.reduce((acc, message, i) => {\n        const style = groupStylesFn(message, messagesWithDates[i - 1], messagesWithDates[i + 1], noGroupByUser, maxTimeBetweenGroupedMessages);\n        if (style)\n            acc[message.id] = style;\n        return acc;\n    }, {}), \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [maxTimeBetweenGroupedMessages, messagesWithDates, noGroupByUser]);\n    return { messageGroupStyles, messages: messagesWithDates };\n};\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,OAAO;AAC/B,SAASC,cAAc,EAAEC,WAAW,EAAEC,eAAe,QAAQ,aAAa;AAC1E,SAASC,cAAc,QAAQ,iCAAiC;AAChE,SAASC,mBAAmB,QAAQ,sCAAsC;AAC1E,OAAO,MAAMC,mBAAmB,GAAIC,IAAI,IAAK;EACzC,MAAM;IAAEC,OAAO;IAAEC,oBAAoB;IAAEC,WAAW;IAAEC,cAAc;IAAEC,mBAAmB;IAAEC,uBAAuB;IAAEC,6BAA6B;IAAEC,QAAQ;IAAEC,aAAa;IAAEC;EAAwB,CAAC,GAAGV,IAAI;EAC1M,MAAM;IAAEW;EAAO,CAAC,GAAGd,cAAc,CAAC,qBAAqB,CAAC;EACxD,MAAM;IAAEe;EAAgB,CAAC,GAAGd,mBAAmB,CAAC,qBAAqB,CAAC;EACtE,MAAMe,QAAQ,GAAGpB,OAAO,CAAC;IAAA,IAAAqB,iBAAA;IAAA,QAAAA,iBAAA,GAAMb,OAAO,CAACY,QAAQ,cAAAC,iBAAA,uBAAhBA,iBAAA,CAAAC,IAAA,CAAAd,OAAmB,CAAC;EAAA,GAAE,CAACA,OAAO,CAAC,CAAC;EAC/D,MAAMe,mBAAmB,GAAG,CAACd,oBAAoB;EACjD,IAAIe,iBAAiB,GAAG,CAACD,mBAAmB,IAAI,CAACX,mBAAmB,IAAIC,uBAAuB,GACzFE,QAAQ,GACRZ,eAAe,CAAC;IACdoB,mBAAmB;IACnBX,mBAAmB;IACnBC,uBAAuB;IACvBO,QAAQ;IACRL,QAAQ;IACRE,sBAAsB;IACtBQ,MAAM,EAAEP,MAAM,CAACQ,MAAM,IAAI;EAC7B,CAAC,CAAC;EACN,IAAIP,eAAe,EAAE;IACjBK,iBAAiB,GAAGtB,WAAW,CAACsB,iBAAiB,EAAEb,cAAc,CAAC;EACtE;EACA,MAAMgB,aAAa,GAAGjB,WAAW,IAAIT,cAAc;EACnD,MAAM2B,kBAAkB,GAAG5B,OAAO,CAAC,MAAMwB,iBAAiB,CAACK,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,EAAEC,CAAC,KAAK;IACnF,MAAMC,KAAK,GAAGN,aAAa,CAACI,OAAO,EAAEP,iBAAiB,CAACQ,CAAC,GAAG,CAAC,CAAC,EAAER,iBAAiB,CAACQ,CAAC,GAAG,CAAC,CAAC,EAAEhB,aAAa,EAAEF,6BAA6B,CAAC;IACtI,IAAImB,KAAK,EACLH,GAAG,CAACC,OAAO,CAACG,EAAE,CAAC,GAAGD,KAAK;IAC3B,OAAOH,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACN;EACA,CAAChB,6BAA6B,EAAEU,iBAAiB,EAAER,aAAa,CAAC,CAAC;EAClE,OAAO;IAAEY,kBAAkB;IAAEb,QAAQ,EAAES;EAAkB,CAAC;AAC9D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}