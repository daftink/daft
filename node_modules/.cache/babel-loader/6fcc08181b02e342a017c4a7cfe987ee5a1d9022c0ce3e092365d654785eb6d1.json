{"ast":null,"code":"import _objectSpread from \"/tmp/daft-chat-temp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport React, { useState } from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport clsx from 'clsx';\nimport { BaseImage as DefaultBaseImage } from './BaseImage';\nimport { Modal } from '../Modal';\nimport { ModalGallery as DefaultModalGallery } from './ModalGallery';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nconst UnMemoizedGallery = props => {\n  const {\n    images,\n    innerRefs\n  } = props;\n  const [index, setIndex] = useState(0);\n  const [modalOpen, setModalOpen] = useState(false);\n  const {\n    BaseImage = DefaultBaseImage,\n    ModalGallery = DefaultModalGallery\n  } = useComponentContext('Gallery');\n  const {\n    t\n  } = useTranslationContext('Gallery');\n  const imageFallbackTitle = t('User uploaded content');\n  const countImagesDisplayedInPreview = 4;\n  const lastImageIndexInPreview = countImagesDisplayedInPreview - 1;\n  const toggleModal = selectedIndex => {\n    if (modalOpen) {\n      setModalOpen(false);\n    } else {\n      setIndex(selectedIndex);\n      setModalOpen(true);\n    }\n  };\n  const renderImages = images.slice(0, countImagesDisplayedInPreview).map((image, i) => i === lastImageIndexInPreview && images.length > countImagesDisplayedInPreview ? React.createElement(\"button\", _objectSpread({\n    className: 'str-chat__gallery-placeholder',\n    \"data-testid\": 'gallery-image-last',\n    key: \"gallery-image-\".concat(i),\n    onClick: () => toggleModal(i),\n    style: _objectSpread({\n      backgroundImage: \"url(\".concat(images[lastImageIndexInPreview].previewUrl || images[lastImageIndexInPreview].image_url || images[lastImageIndexInPreview].thumb_url, \")\")\n    }, image.style)\n  }, (innerRefs === null || innerRefs === void 0 ? void 0 : innerRefs.current) && {\n    ref: r => {\n      innerRefs.current[i] = r;\n    }\n  }), React.createElement(\"p\", null, t('{{ imageCount }} more', {\n    imageCount: images.length - countImagesDisplayedInPreview\n  }))) : React.createElement(\"button\", {\n    className: 'str-chat__gallery-image',\n    \"data-testid\": 'gallery-image',\n    key: \"gallery-image-\".concat(i),\n    onClick: () => toggleModal(i)\n  }, React.createElement(BaseImage, _objectSpread({\n    alt: (image === null || image === void 0 ? void 0 : image.fallback) || imageFallbackTitle,\n    src: sanitizeUrl(image.previewUrl || image.image_url || image.thumb_url),\n    style: image.style,\n    title: (image === null || image === void 0 ? void 0 : image.fallback) || imageFallbackTitle\n  }, (innerRefs === null || innerRefs === void 0 ? void 0 : innerRefs.current) && {\n    ref: r => {\n      innerRefs.current[i] = r;\n    }\n  }))));\n  const className = clsx('str-chat__gallery', {\n    'str-chat__gallery--square': images.length > lastImageIndexInPreview,\n    'str-chat__gallery-two-rows': images.length > 2\n  });\n  return React.createElement(\"div\", {\n    className: className\n  }, renderImages, React.createElement(Modal, {\n    className: 'str-chat__gallery-modal',\n    onClose: () => setModalOpen(modalOpen => !modalOpen),\n    open: modalOpen\n  }, React.createElement(ModalGallery, {\n    images: images,\n    index: index\n  })));\n};\n/**\n * Displays images in a simple responsive grid with a light box to view the images.\n */\nexport const Gallery = React.memo(UnMemoizedGallery);","map":{"version":3,"names":["React","useState","sanitizeUrl","clsx","BaseImage","DefaultBaseImage","Modal","ModalGallery","DefaultModalGallery","useComponentContext","useTranslationContext","UnMemoizedGallery","props","images","innerRefs","index","setIndex","modalOpen","setModalOpen","t","imageFallbackTitle","countImagesDisplayedInPreview","lastImageIndexInPreview","toggleModal","selectedIndex","renderImages","slice","map","image","i","length","createElement","_objectSpread","className","key","concat","onClick","style","backgroundImage","previewUrl","image_url","thumb_url","current","ref","r","imageCount","alt","fallback","src","title","onClose","open","Gallery","memo"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Gallery/Gallery.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport clsx from 'clsx';\nimport { BaseImage as DefaultBaseImage } from './BaseImage';\nimport { Modal } from '../Modal';\nimport { ModalGallery as DefaultModalGallery } from './ModalGallery';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nconst UnMemoizedGallery = (props) => {\n    const { images, innerRefs } = props;\n    const [index, setIndex] = useState(0);\n    const [modalOpen, setModalOpen] = useState(false);\n    const { BaseImage = DefaultBaseImage, ModalGallery = DefaultModalGallery } = useComponentContext('Gallery');\n    const { t } = useTranslationContext('Gallery');\n    const imageFallbackTitle = t('User uploaded content');\n    const countImagesDisplayedInPreview = 4;\n    const lastImageIndexInPreview = countImagesDisplayedInPreview - 1;\n    const toggleModal = (selectedIndex) => {\n        if (modalOpen) {\n            setModalOpen(false);\n        }\n        else {\n            setIndex(selectedIndex);\n            setModalOpen(true);\n        }\n    };\n    const renderImages = images.slice(0, countImagesDisplayedInPreview).map((image, i) => i === lastImageIndexInPreview && images.length > countImagesDisplayedInPreview ? (React.createElement(\"button\", { className: 'str-chat__gallery-placeholder', \"data-testid\": 'gallery-image-last', key: `gallery-image-${i}`, onClick: () => toggleModal(i), style: {\n            backgroundImage: `url(${images[lastImageIndexInPreview].previewUrl ||\n                images[lastImageIndexInPreview].image_url ||\n                images[lastImageIndexInPreview].thumb_url})`,\n            ...image.style,\n        }, ...(innerRefs?.current && {\n            ref: (r) => {\n                innerRefs.current[i] = r;\n            },\n        }) },\n        React.createElement(\"p\", null, t('{{ imageCount }} more', {\n            imageCount: images.length - countImagesDisplayedInPreview,\n        })))) : (React.createElement(\"button\", { className: 'str-chat__gallery-image', \"data-testid\": 'gallery-image', key: `gallery-image-${i}`, onClick: () => toggleModal(i) },\n        React.createElement(BaseImage, { alt: image?.fallback || imageFallbackTitle, src: sanitizeUrl(image.previewUrl || image.image_url || image.thumb_url), style: image.style, title: image?.fallback || imageFallbackTitle, ...(innerRefs?.current && {\n                ref: (r) => {\n                    innerRefs.current[i] = r;\n                },\n            }) }))));\n    const className = clsx('str-chat__gallery', {\n        'str-chat__gallery--square': images.length > lastImageIndexInPreview,\n        'str-chat__gallery-two-rows': images.length > 2,\n    });\n    return (React.createElement(\"div\", { className: className },\n        renderImages,\n        React.createElement(Modal, { className: 'str-chat__gallery-modal', onClose: () => setModalOpen((modalOpen) => !modalOpen), open: modalOpen },\n            React.createElement(ModalGallery, { images: images, index: index }))));\n};\n/**\n * Displays images in a simple responsive grid with a light box to view the images.\n */\nexport const Gallery = React.memo(UnMemoizedGallery);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}