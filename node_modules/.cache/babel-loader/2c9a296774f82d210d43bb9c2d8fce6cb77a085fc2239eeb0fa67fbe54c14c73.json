{"ast":null,"code":"import { useCallback, useEffect, useState } from 'react';\n/**\n * Controls the logic when an `UnreadMessagesNotification` component should be shown.\n * In virtualized message list there is no notion of being scrolled below or above `UnreadMessagesSeparator`.\n * Therefore, the `UnreadMessagesNotification` component is rendered based on timestamps.\n * If the there are unread messages in the channel and the `VirtualizedMessageList` renders\n * messages created later than the last read message in the channel, then the\n * `UnreadMessagesNotification` component is rendered. This is an approximate equivalent to being\n * scrolled below the `UnreadMessagesNotification` component.\n * @param lastRead\n * @param showAlways\n * @param unreadCount\n */\nexport const useUnreadMessagesNotificationVirtualized = _ref => {\n  let {\n    lastRead,\n    showAlways,\n    unreadCount\n  } = _ref;\n  const [show, setShow] = useState(false);\n  const toggleShowUnreadMessagesNotification = useCallback(renderedMessages => {\n    var _firstRenderedMessage, _lastRenderedMessage$;\n    if (!unreadCount) return;\n    const firstRenderedMessage = renderedMessages[0];\n    const lastRenderedMessage = renderedMessages.slice(-1)[0];\n    if (!(firstRenderedMessage && lastRenderedMessage)) return;\n    const firstRenderedMessageTime = new Date((_firstRenderedMessage = firstRenderedMessage.created_at) !== null && _firstRenderedMessage !== void 0 ? _firstRenderedMessage : 0).getTime();\n    const lastRenderedMessageTime = new Date((_lastRenderedMessage$ = lastRenderedMessage.created_at) !== null && _lastRenderedMessage$ !== void 0 ? _lastRenderedMessage$ : 0).getTime();\n    const lastReadTime = new Date(lastRead !== null && lastRead !== void 0 ? lastRead : 0).getTime();\n    const scrolledBelowSeparator = !!lastReadTime && firstRenderedMessageTime > lastReadTime;\n    const scrolledAboveSeparator = !!lastReadTime && lastRenderedMessageTime < lastReadTime;\n    setShow(showAlways ? scrolledBelowSeparator || scrolledAboveSeparator : scrolledBelowSeparator);\n  }, [lastRead, showAlways, unreadCount]);\n  useEffect(() => {\n    if (!unreadCount) setShow(false);\n  }, [unreadCount]);\n  return {\n    show,\n    toggleShowUnreadMessagesNotification\n  };\n};","map":{"version":3,"names":["useCallback","useEffect","useState","useUnreadMessagesNotificationVirtualized","_ref","lastRead","showAlways","unreadCount","show","setShow","toggleShowUnreadMessagesNotification","renderedMessages","_firstRenderedMessage","_lastRenderedMessage$","firstRenderedMessage","lastRenderedMessage","slice","firstRenderedMessageTime","Date","created_at","getTime","lastRenderedMessageTime","lastReadTime","scrolledBelowSeparator","scrolledAboveSeparator"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/MessageList/hooks/VirtualizedMessageList/useUnreadMessagesNotificationVirtualized.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n/**\n * Controls the logic when an `UnreadMessagesNotification` component should be shown.\n * In virtualized message list there is no notion of being scrolled below or above `UnreadMessagesSeparator`.\n * Therefore, the `UnreadMessagesNotification` component is rendered based on timestamps.\n * If the there are unread messages in the channel and the `VirtualizedMessageList` renders\n * messages created later than the last read message in the channel, then the\n * `UnreadMessagesNotification` component is rendered. This is an approximate equivalent to being\n * scrolled below the `UnreadMessagesNotification` component.\n * @param lastRead\n * @param showAlways\n * @param unreadCount\n */\nexport const useUnreadMessagesNotificationVirtualized = ({ lastRead, showAlways, unreadCount, }) => {\n    const [show, setShow] = useState(false);\n    const toggleShowUnreadMessagesNotification = useCallback((renderedMessages) => {\n        if (!unreadCount)\n            return;\n        const firstRenderedMessage = renderedMessages[0];\n        const lastRenderedMessage = renderedMessages.slice(-1)[0];\n        if (!(firstRenderedMessage && lastRenderedMessage))\n            return;\n        const firstRenderedMessageTime = new Date(firstRenderedMessage.created_at ?? 0).getTime();\n        const lastRenderedMessageTime = new Date(lastRenderedMessage.created_at ?? 0).getTime();\n        const lastReadTime = new Date(lastRead ?? 0).getTime();\n        const scrolledBelowSeparator = !!lastReadTime && firstRenderedMessageTime > lastReadTime;\n        const scrolledAboveSeparator = !!lastReadTime && lastRenderedMessageTime < lastReadTime;\n        setShow(showAlways\n            ? scrolledBelowSeparator || scrolledAboveSeparator\n            : scrolledBelowSeparator);\n    }, [lastRead, showAlways, unreadCount]);\n    useEffect(() => {\n        if (!unreadCount)\n            setShow(false);\n    }, [unreadCount]);\n    return { show, toggleShowUnreadMessagesNotification };\n};\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,wCAAwC,GAAGC,IAAA,IAA4C;EAAA,IAA3C;IAAEC,QAAQ;IAAEC,UAAU;IAAEC;EAAa,CAAC,GAAAH,IAAA;EAC3F,MAAM,CAACI,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAMQ,oCAAoC,GAAGV,WAAW,CAAEW,gBAAgB,IAAK;IAAA,IAAAC,qBAAA,EAAAC,qBAAA;IAC3E,IAAI,CAACN,WAAW,EACZ;IACJ,MAAMO,oBAAoB,GAAGH,gBAAgB,CAAC,CAAC,CAAC;IAChD,MAAMI,mBAAmB,GAAGJ,gBAAgB,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzD,IAAI,EAAEF,oBAAoB,IAAIC,mBAAmB,CAAC,EAC9C;IACJ,MAAME,wBAAwB,GAAG,IAAIC,IAAI,EAAAN,qBAAA,GAACE,oBAAoB,CAACK,UAAU,cAAAP,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC,CAACQ,OAAO,CAAC,CAAC;IACzF,MAAMC,uBAAuB,GAAG,IAAIH,IAAI,EAAAL,qBAAA,GAACE,mBAAmB,CAACI,UAAU,cAAAN,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC,CAACO,OAAO,CAAC,CAAC;IACvF,MAAME,YAAY,GAAG,IAAIJ,IAAI,CAACb,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,CAAC,CAAC,CAACe,OAAO,CAAC,CAAC;IACtD,MAAMG,sBAAsB,GAAG,CAAC,CAACD,YAAY,IAAIL,wBAAwB,GAAGK,YAAY;IACxF,MAAME,sBAAsB,GAAG,CAAC,CAACF,YAAY,IAAID,uBAAuB,GAAGC,YAAY;IACvFb,OAAO,CAACH,UAAU,GACZiB,sBAAsB,IAAIC,sBAAsB,GAChDD,sBAAsB,CAAC;EACjC,CAAC,EAAE,CAAClB,QAAQ,EAAEC,UAAU,EAAEC,WAAW,CAAC,CAAC;EACvCN,SAAS,CAAC,MAAM;IACZ,IAAI,CAACM,WAAW,EACZE,OAAO,CAAC,KAAK,CAAC;EACtB,CAAC,EAAE,CAACF,WAAW,CAAC,CAAC;EACjB,OAAO;IAAEC,IAAI;IAAEE;EAAqC,CAAC;AACzD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}