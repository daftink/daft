{"ast":null,"code":"import _objectSpread from \"/tmp/daft-chat-temp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport React, { useCallback, useEffect } from 'react';\nimport { MessageInput } from './MessageInput';\nimport { MessageInputFlat } from './MessageInputFlat';\nimport { Modal } from '../Modal';\nimport { useComponentContext, useMessageContext, useMessageInputContext, useTranslationContext } from '../../context';\nimport { useMessageComposer, useMessageComposerHasSendableData } from './hooks';\nconst EditMessageFormSendButton = () => {\n  const {\n    t\n  } = useTranslationContext();\n  const hasSendableData = useMessageComposerHasSendableData();\n  return React.createElement(\"button\", {\n    className: 'str-chat__edit-message-send',\n    \"data-testid\": 'send-button-edit-form',\n    disabled: !hasSendableData,\n    type: 'submit'\n  }, t('Send'));\n};\nexport const EditMessageForm = () => {\n  const {\n    t\n  } = useTranslationContext('EditMessageForm');\n  const messageComposer = useMessageComposer();\n  const {\n    clearEditingState,\n    handleSubmit\n  } = useMessageInputContext('EditMessageForm');\n  const cancel = useCallback(() => {\n    clearEditingState === null || clearEditingState === void 0 || clearEditingState();\n    messageComposer.restore();\n  }, [clearEditingState, messageComposer]);\n  useEffect(() => {\n    const onKeyDown = event => {\n      if (event.key === 'Escape') cancel();\n    };\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [cancel]);\n  return React.createElement(\"form\", {\n    autoComplete: 'off',\n    className: 'str-chat__edit-message-form',\n    onSubmit: handleSubmit\n  }, React.createElement(MessageInputFlat, null), React.createElement(\"div\", {\n    className: 'str-chat__edit-message-form-options'\n  }, React.createElement(\"button\", {\n    className: 'str-chat__edit-message-cancel',\n    \"data-testid\": 'cancel-button',\n    onClick: cancel\n  }, t('Cancel')), React.createElement(EditMessageFormSendButton, null)));\n};\nexport const EditMessageModal = _ref => {\n  let {\n    additionalMessageInputProps\n  } = _ref;\n  const {\n    EditMessageInput = EditMessageForm\n  } = useComponentContext();\n  const {\n    clearEditingState\n  } = useMessageContext();\n  const messageComposer = useMessageComposer();\n  const onEditModalClose = useCallback(() => {\n    clearEditingState();\n    messageComposer.restore();\n  }, [clearEditingState, messageComposer]);\n  return React.createElement(Modal, {\n    className: 'str-chat__edit-message-modal',\n    onClose: onEditModalClose,\n    open: true\n  }, React.createElement(MessageInput, _objectSpread({\n    clearEditingState: clearEditingState,\n    hideSendButton: true,\n    Input: EditMessageInput\n  }, additionalMessageInputProps)));\n};","map":{"version":3,"names":["React","useCallback","useEffect","MessageInput","MessageInputFlat","Modal","useComponentContext","useMessageContext","useMessageInputContext","useTranslationContext","useMessageComposer","useMessageComposerHasSendableData","EditMessageFormSendButton","t","hasSendableData","createElement","className","disabled","type","EditMessageForm","messageComposer","clearEditingState","handleSubmit","cancel","restore","onKeyDown","event","key","document","addEventListener","removeEventListener","autoComplete","onSubmit","onClick","EditMessageModal","_ref","additionalMessageInputProps","EditMessageInput","onEditModalClose","onClose","open","_objectSpread","hideSendButton","Input"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/MessageInput/EditMessageForm.js"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport { MessageInput } from './MessageInput';\nimport { MessageInputFlat } from './MessageInputFlat';\nimport { Modal } from '../Modal';\nimport { useComponentContext, useMessageContext, useMessageInputContext, useTranslationContext, } from '../../context';\nimport { useMessageComposer, useMessageComposerHasSendableData } from './hooks';\nconst EditMessageFormSendButton = () => {\n    const { t } = useTranslationContext();\n    const hasSendableData = useMessageComposerHasSendableData();\n    return (React.createElement(\"button\", { className: 'str-chat__edit-message-send', \"data-testid\": 'send-button-edit-form', disabled: !hasSendableData, type: 'submit' }, t('Send')));\n};\nexport const EditMessageForm = () => {\n    const { t } = useTranslationContext('EditMessageForm');\n    const messageComposer = useMessageComposer();\n    const { clearEditingState, handleSubmit } = useMessageInputContext('EditMessageForm');\n    const cancel = useCallback(() => {\n        clearEditingState?.();\n        messageComposer.restore();\n    }, [clearEditingState, messageComposer]);\n    useEffect(() => {\n        const onKeyDown = (event) => {\n            if (event.key === 'Escape')\n                cancel();\n        };\n        document.addEventListener('keydown', onKeyDown);\n        return () => document.removeEventListener('keydown', onKeyDown);\n    }, [cancel]);\n    return (React.createElement(\"form\", { autoComplete: 'off', className: 'str-chat__edit-message-form', onSubmit: handleSubmit },\n        React.createElement(MessageInputFlat, null),\n        React.createElement(\"div\", { className: 'str-chat__edit-message-form-options' },\n            React.createElement(\"button\", { className: 'str-chat__edit-message-cancel', \"data-testid\": 'cancel-button', onClick: cancel }, t('Cancel')),\n            React.createElement(EditMessageFormSendButton, null))));\n};\nexport const EditMessageModal = ({ additionalMessageInputProps, }) => {\n    const { EditMessageInput = EditMessageForm } = useComponentContext();\n    const { clearEditingState } = useMessageContext();\n    const messageComposer = useMessageComposer();\n    const onEditModalClose = useCallback(() => {\n        clearEditingState();\n        messageComposer.restore();\n    }, [clearEditingState, messageComposer]);\n    return (React.createElement(Modal, { className: 'str-chat__edit-message-modal', onClose: onEditModalClose, open: true },\n        React.createElement(MessageInput, { clearEditingState: clearEditingState, hideSendButton: true, Input: EditMessageInput, ...additionalMessageInputProps })));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}