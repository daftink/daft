{"ast":null,"code":"import React from 'react';\nimport { PlayButton } from '../../Attachment';\nimport { RecordingTimer } from '../../MediaRecorder';\nimport { CloseIcon, LoadingIndicatorIcon, RetryIcon } from '../icons';\nimport { FileIcon } from '../../ReactFileUtilities';\nimport { useAudioController } from '../../Attachment/hooks/useAudioController';\nimport { useTranslationContext } from '../../../context';\nexport const VoiceRecordingPreview = _ref => {\n  var _attachment$localMeta, _attachment$localMeta3, _attachment$localMeta4;\n  let {\n    attachment,\n    handleRetry,\n    removeAttachments\n  } = _ref;\n  const {\n    t\n  } = useTranslationContext();\n  const {\n    audioRef,\n    isPlaying,\n    secondsElapsed,\n    togglePlay\n  } = useAudioController({\n    mimeType: attachment.mime_type\n  });\n  return React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-voice-recording',\n    \"data-testid\": 'attachment-preview-voice-recording'\n  }, React.createElement(\"audio\", {\n    ref: audioRef\n  }, React.createElement(\"source\", {\n    \"data-testid\": 'audio-source',\n    src: attachment.asset_url,\n    type: attachment.mime_type\n  })), React.createElement(PlayButton, {\n    isPlaying: isPlaying,\n    onClick: togglePlay\n  }), React.createElement(\"button\", {\n    \"aria-label\": t('aria/Remove attachment'),\n    className: 'str-chat__attachment-preview-delete',\n    \"data-testid\": 'file-preview-item-delete-button',\n    disabled: ((_attachment$localMeta = attachment.localMetadata) === null || _attachment$localMeta === void 0 ? void 0 : _attachment$localMeta.uploadState) === 'uploading',\n    onClick: () => {\n      var _attachment$localMeta2;\n      return ((_attachment$localMeta2 = attachment.localMetadata) === null || _attachment$localMeta2 === void 0 ? void 0 : _attachment$localMeta2.id) && removeAttachments([attachment.localMetadata.id]);\n    }\n  }, React.createElement(CloseIcon, null)), ['blocked', 'failed'].includes((_attachment$localMeta3 = attachment.localMetadata) === null || _attachment$localMeta3 === void 0 ? void 0 : _attachment$localMeta3.uploadState) && !!handleRetry && React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-file',\n    \"data-testid\": 'file-preview-item-retry-button',\n    onClick: () => handleRetry(attachment)\n  }, React.createElement(RetryIcon, null)), React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-metadata'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file-name',\n    title: attachment.title\n  }, attachment.title), typeof attachment.duration !== 'undefined' && React.createElement(RecordingTimer, {\n    durationSeconds: secondsElapsed || attachment.duration\n  }), ((_attachment$localMeta4 = attachment.localMetadata) === null || _attachment$localMeta4 === void 0 ? void 0 : _attachment$localMeta4.uploadState) === 'uploading' && React.createElement(LoadingIndicatorIcon, {\n    size: 17\n  })), React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-file-icon'\n  }, React.createElement(FileIcon, {\n    filename: attachment.title,\n    mimeType: attachment.mime_type\n  })));\n};","map":{"version":3,"names":["React","PlayButton","RecordingTimer","CloseIcon","LoadingIndicatorIcon","RetryIcon","FileIcon","useAudioController","useTranslationContext","VoiceRecordingPreview","_ref","_attachment$localMeta","_attachment$localMeta3","_attachment$localMeta4","attachment","handleRetry","removeAttachments","t","audioRef","isPlaying","secondsElapsed","togglePlay","mimeType","mime_type","createElement","className","ref","src","asset_url","type","onClick","disabled","localMetadata","uploadState","_attachment$localMeta2","id","includes","title","duration","durationSeconds","size","filename"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/MessageInput/AttachmentPreviewList/VoiceRecordingPreview.js"],"sourcesContent":["import React from 'react';\nimport { PlayButton } from '../../Attachment';\nimport { RecordingTimer } from '../../MediaRecorder';\nimport { CloseIcon, LoadingIndicatorIcon, RetryIcon } from '../icons';\nimport { FileIcon } from '../../ReactFileUtilities';\nimport { useAudioController } from '../../Attachment/hooks/useAudioController';\nimport { useTranslationContext } from '../../../context';\nexport const VoiceRecordingPreview = ({ attachment, handleRetry, removeAttachments, }) => {\n    const { t } = useTranslationContext();\n    const { audioRef, isPlaying, secondsElapsed, togglePlay } = useAudioController({\n        mimeType: attachment.mime_type,\n    });\n    return (React.createElement(\"div\", { className: 'str-chat__attachment-preview-voice-recording', \"data-testid\": 'attachment-preview-voice-recording' },\n        React.createElement(\"audio\", { ref: audioRef },\n            React.createElement(\"source\", { \"data-testid\": 'audio-source', src: attachment.asset_url, type: attachment.mime_type })),\n        React.createElement(PlayButton, { isPlaying: isPlaying, onClick: togglePlay }),\n        React.createElement(\"button\", { \"aria-label\": t('aria/Remove attachment'), className: 'str-chat__attachment-preview-delete', \"data-testid\": 'file-preview-item-delete-button', disabled: attachment.localMetadata?.uploadState === 'uploading', onClick: () => attachment.localMetadata?.id && removeAttachments([attachment.localMetadata.id]) },\n            React.createElement(CloseIcon, null)),\n        ['blocked', 'failed'].includes(attachment.localMetadata?.uploadState) &&\n            !!handleRetry && (React.createElement(\"button\", { className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-file', \"data-testid\": 'file-preview-item-retry-button', onClick: () => handleRetry(attachment) },\n            React.createElement(RetryIcon, null))),\n        React.createElement(\"div\", { className: 'str-chat__attachment-preview-metadata' },\n            React.createElement(\"div\", { className: 'str-chat__attachment-preview-file-name', title: attachment.title }, attachment.title),\n            typeof attachment.duration !== 'undefined' && (React.createElement(RecordingTimer, { durationSeconds: secondsElapsed || attachment.duration })),\n            attachment.localMetadata?.uploadState === 'uploading' && (React.createElement(LoadingIndicatorIcon, { size: 17 }))),\n        React.createElement(\"div\", { className: 'str-chat__attachment-preview-file-icon' },\n            React.createElement(FileIcon, { filename: attachment.title, mimeType: attachment.mime_type }))));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}