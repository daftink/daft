{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useCallback, useState } from 'react';\nimport { CloseIcon, LoadingIndicatorIcon, RetryIcon } from '../icons';\nimport { BaseImage as DefaultBaseImage } from '../../Gallery';\nimport { useComponentContext, useTranslationContext } from '../../../context';\nexport const ImageAttachmentPreview = _ref => {\n  var _attachment$localMeta;\n  let {\n    attachment,\n    handleRetry,\n    removeAttachments\n  } = _ref;\n  const {\n    t\n  } = useTranslationContext('ImagePreviewItem');\n  const {\n    BaseImage = DefaultBaseImage\n  } = useComponentContext('ImagePreview');\n  const [previewError, setPreviewError] = useState(false);\n  const {\n    id,\n    uploadState\n  } = (_attachment$localMeta = attachment.localMetadata) !== null && _attachment$localMeta !== void 0 ? _attachment$localMeta : {};\n  const handleLoadError = useCallback(() => setPreviewError(true), []);\n  const assetUrl = attachment.image_url || attachment.localMetadata.previewUri;\n  return React.createElement(\"div\", {\n    className: clsx('str-chat__attachment-preview-image', {\n      'str-chat__attachment-preview-image--error': previewError\n    }),\n    \"data-testid\": 'attachment-preview-image'\n  }, React.createElement(\"button\", {\n    \"aria-label\": t('aria/Remove attachment'),\n    className: 'str-chat__attachment-preview-delete',\n    \"data-testid\": 'image-preview-item-delete-button',\n    disabled: uploadState === 'uploading',\n    onClick: () => id && removeAttachments([id])\n  }, React.createElement(CloseIcon, null)), ['blocked', 'failed'].includes(uploadState) && React.createElement(\"button\", {\n    className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-image',\n    \"data-testid\": 'image-preview-item-retry-button',\n    onClick: () => handleRetry(attachment)\n  }, React.createElement(RetryIcon, null)), uploadState === 'uploading' && React.createElement(\"div\", {\n    className: 'str-chat__attachment-preview-image-loading'\n  }, React.createElement(LoadingIndicatorIcon, {\n    size: 17\n  })), assetUrl && React.createElement(BaseImage, {\n    alt: attachment.fallback,\n    className: 'str-chat__attachment-preview-thumbnail',\n    onError: handleLoadError,\n    src: assetUrl,\n    title: attachment.fallback\n  }));\n};","map":{"version":3,"names":["clsx","React","useCallback","useState","CloseIcon","LoadingIndicatorIcon","RetryIcon","BaseImage","DefaultBaseImage","useComponentContext","useTranslationContext","ImageAttachmentPreview","_ref","_attachment$localMeta","attachment","handleRetry","removeAttachments","t","previewError","setPreviewError","id","uploadState","localMetadata","handleLoadError","assetUrl","image_url","previewUri","createElement","className","disabled","onClick","includes","size","alt","fallback","onError","src","title"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/MessageInput/AttachmentPreviewList/ImageAttachmentPreview.js"],"sourcesContent":["import clsx from 'clsx';\nimport React, { useCallback, useState } from 'react';\nimport { CloseIcon, LoadingIndicatorIcon, RetryIcon } from '../icons';\nimport { BaseImage as DefaultBaseImage } from '../../Gallery';\nimport { useComponentContext, useTranslationContext } from '../../../context';\nexport const ImageAttachmentPreview = ({ attachment, handleRetry, removeAttachments, }) => {\n    const { t } = useTranslationContext('ImagePreviewItem');\n    const { BaseImage = DefaultBaseImage } = useComponentContext('ImagePreview');\n    const [previewError, setPreviewError] = useState(false);\n    const { id, uploadState } = attachment.localMetadata ?? {};\n    const handleLoadError = useCallback(() => setPreviewError(true), []);\n    const assetUrl = attachment.image_url || attachment.localMetadata.previewUri;\n    return (React.createElement(\"div\", { className: clsx('str-chat__attachment-preview-image', {\n            'str-chat__attachment-preview-image--error': previewError,\n        }), \"data-testid\": 'attachment-preview-image' },\n        React.createElement(\"button\", { \"aria-label\": t('aria/Remove attachment'), className: 'str-chat__attachment-preview-delete', \"data-testid\": 'image-preview-item-delete-button', disabled: uploadState === 'uploading', onClick: () => id && removeAttachments([id]) },\n            React.createElement(CloseIcon, null)),\n        ['blocked', 'failed'].includes(uploadState) && (React.createElement(\"button\", { className: 'str-chat__attachment-preview-error str-chat__attachment-preview-error-image', \"data-testid\": 'image-preview-item-retry-button', onClick: () => handleRetry(attachment) },\n            React.createElement(RetryIcon, null))),\n        uploadState === 'uploading' && (React.createElement(\"div\", { className: 'str-chat__attachment-preview-image-loading' },\n            React.createElement(LoadingIndicatorIcon, { size: 17 }))),\n        assetUrl && (React.createElement(BaseImage, { alt: attachment.fallback, className: 'str-chat__attachment-preview-thumbnail', onError: handleLoadError, src: assetUrl, title: attachment.fallback }))));\n};\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,SAAS,EAAEC,oBAAoB,EAAEC,SAAS,QAAQ,UAAU;AACrE,SAASC,SAAS,IAAIC,gBAAgB,QAAQ,eAAe;AAC7D,SAASC,mBAAmB,EAAEC,qBAAqB,QAAQ,kBAAkB;AAC7E,OAAO,MAAMC,sBAAsB,GAAGC,IAAA,IAAqD;EAAA,IAAAC,qBAAA;EAAA,IAApD;IAAEC,UAAU;IAAEC,WAAW;IAAEC;EAAmB,CAAC,GAAAJ,IAAA;EAClF,MAAM;IAAEK;EAAE,CAAC,GAAGP,qBAAqB,CAAC,kBAAkB,CAAC;EACvD,MAAM;IAAEH,SAAS,GAAGC;EAAiB,CAAC,GAAGC,mBAAmB,CAAC,cAAc,CAAC;EAC5E,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM;IAAEiB,EAAE;IAAEC;EAAY,CAAC,IAAAR,qBAAA,GAAGC,UAAU,CAACQ,aAAa,cAAAT,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;EAC1D,MAAMU,eAAe,GAAGrB,WAAW,CAAC,MAAMiB,eAAe,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;EACpE,MAAMK,QAAQ,GAAGV,UAAU,CAACW,SAAS,IAAIX,UAAU,CAACQ,aAAa,CAACI,UAAU;EAC5E,OAAQzB,KAAK,CAAC0B,aAAa,CAAC,KAAK,EAAE;IAAEC,SAAS,EAAE5B,IAAI,CAAC,oCAAoC,EAAE;MACnF,2CAA2C,EAAEkB;IACjD,CAAC,CAAC;IAAE,aAAa,EAAE;EAA2B,CAAC,EAC/CjB,KAAK,CAAC0B,aAAa,CAAC,QAAQ,EAAE;IAAE,YAAY,EAAEV,CAAC,CAAC,wBAAwB,CAAC;IAAEW,SAAS,EAAE,qCAAqC;IAAE,aAAa,EAAE,kCAAkC;IAAEC,QAAQ,EAAER,WAAW,KAAK,WAAW;IAAES,OAAO,EAAEA,CAAA,KAAMV,EAAE,IAAIJ,iBAAiB,CAAC,CAACI,EAAE,CAAC;EAAE,CAAC,EACjQnB,KAAK,CAAC0B,aAAa,CAACvB,SAAS,EAAE,IAAI,CAAC,CAAC,EACzC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC2B,QAAQ,CAACV,WAAW,CAAC,IAAKpB,KAAK,CAAC0B,aAAa,CAAC,QAAQ,EAAE;IAAEC,SAAS,EAAE,6EAA6E;IAAE,aAAa,EAAE,iCAAiC;IAAEE,OAAO,EAAEA,CAAA,KAAMf,WAAW,CAACD,UAAU;EAAE,CAAC,EAChQb,KAAK,CAAC0B,aAAa,CAACrB,SAAS,EAAE,IAAI,CAAC,CAAE,EAC1Ce,WAAW,KAAK,WAAW,IAAKpB,KAAK,CAAC0B,aAAa,CAAC,KAAK,EAAE;IAAEC,SAAS,EAAE;EAA6C,CAAC,EAClH3B,KAAK,CAAC0B,aAAa,CAACtB,oBAAoB,EAAE;IAAE2B,IAAI,EAAE;EAAG,CAAC,CAAC,CAAE,EAC7DR,QAAQ,IAAKvB,KAAK,CAAC0B,aAAa,CAACpB,SAAS,EAAE;IAAE0B,GAAG,EAAEnB,UAAU,CAACoB,QAAQ;IAAEN,SAAS,EAAE,wCAAwC;IAAEO,OAAO,EAAEZ,eAAe;IAAEa,GAAG,EAAEZ,QAAQ;IAAEa,KAAK,EAAEvB,UAAU,CAACoB;EAAS,CAAC,CAAE,CAAC;AAC7M,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}