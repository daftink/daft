{"ast":null,"code":"import _objectSpread from \"/tmp/daft-chat-temp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useCallback } from 'react';\nimport { useManagePollVotesRealtime } from './useManagePollVotesRealtime';\nimport { useCursorPaginator } from '../../InfiniteScrollPaginator/hooks/useCursorPaginator';\nimport { useStateStore } from '../../../store';\nimport { usePollContext } from '../../../context';\nconst paginationStateSelector = state => [state.error, state.hasNextPage, state.loading];\nexport const usePollOptionVotesPagination = _ref => {\n  let {\n    paginationParams\n  } = _ref;\n  const {\n    poll\n  } = usePollContext();\n  const paginationFn = useCallback(async next => {\n    const {\n      next: newNext,\n      votes\n    } = await poll.queryOptionVotes({\n      filter: paginationParams.filter,\n      options: !next ? paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.options : _objectSpread(_objectSpread({}, paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.options), {}, {\n        next\n      }),\n      sort: _objectSpread({\n        created_at: -1\n      }, paginationParams === null || paginationParams === void 0 ? void 0 : paginationParams.sort)\n    });\n    return {\n      items: votes,\n      next: newNext\n    };\n  }, [paginationParams, poll]);\n  const {\n    cursorPaginatorState,\n    loadMore\n  } = useCursorPaginator(paginationFn, true);\n  const votes = useManagePollVotesRealtime('vote', cursorPaginatorState, paginationParams.filter.option_id);\n  const [error, hasNextPage, loading] = useStateStore(cursorPaginatorState, paginationStateSelector);\n  return {\n    error,\n    hasNextPage,\n    loading,\n    loadMore,\n    votes\n  };\n};","map":{"version":3,"names":["useCallback","useManagePollVotesRealtime","useCursorPaginator","useStateStore","usePollContext","paginationStateSelector","state","error","hasNextPage","loading","usePollOptionVotesPagination","_ref","paginationParams","poll","paginationFn","next","newNext","votes","queryOptionVotes","filter","options","_objectSpread","sort","created_at","items","cursorPaginatorState","loadMore","option_id"],"sources":["/tmp/daft-chat-temp/node_modules/stream-chat-react/dist/components/Poll/hooks/usePollOptionVotesPagination.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { useManagePollVotesRealtime } from './useManagePollVotesRealtime';\nimport { useCursorPaginator } from '../../InfiniteScrollPaginator/hooks/useCursorPaginator';\nimport { useStateStore } from '../../../store';\nimport { usePollContext } from '../../../context';\nconst paginationStateSelector = (state) => [\n    state.error,\n    state.hasNextPage,\n    state.loading,\n];\nexport const usePollOptionVotesPagination = ({ paginationParams, }) => {\n    const { poll } = usePollContext();\n    const paginationFn = useCallback(async (next) => {\n        const { next: newNext, votes } = await poll.queryOptionVotes({\n            filter: paginationParams.filter,\n            options: !next\n                ? paginationParams?.options\n                : { ...paginationParams?.options, next },\n            sort: { created_at: -1, ...paginationParams?.sort },\n        });\n        return { items: votes, next: newNext };\n    }, [paginationParams, poll]);\n    const { cursorPaginatorState, loadMore } = useCursorPaginator(paginationFn, true);\n    const votes = useManagePollVotesRealtime('vote', cursorPaginatorState, paginationParams.filter.option_id);\n    const [error, hasNextPage, loading] = useStateStore(cursorPaginatorState, paginationStateSelector);\n    return {\n        error,\n        hasNextPage,\n        loading,\n        loadMore,\n        votes,\n    };\n};\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,0BAA0B,QAAQ,8BAA8B;AACzE,SAASC,kBAAkB,QAAQ,wDAAwD;AAC3F,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,cAAc,QAAQ,kBAAkB;AACjD,MAAMC,uBAAuB,GAAIC,KAAK,IAAK,CACvCA,KAAK,CAACC,KAAK,EACXD,KAAK,CAACE,WAAW,EACjBF,KAAK,CAACG,OAAO,CAChB;AACD,OAAO,MAAMC,4BAA4B,GAAGC,IAAA,IAA2B;EAAA,IAA1B;IAAEC;EAAkB,CAAC,GAAAD,IAAA;EAC9D,MAAM;IAAEE;EAAK,CAAC,GAAGT,cAAc,CAAC,CAAC;EACjC,MAAMU,YAAY,GAAGd,WAAW,CAAC,MAAOe,IAAI,IAAK;IAC7C,MAAM;MAAEA,IAAI,EAAEC,OAAO;MAAEC;IAAM,CAAC,GAAG,MAAMJ,IAAI,CAACK,gBAAgB,CAAC;MACzDC,MAAM,EAAEP,gBAAgB,CAACO,MAAM;MAC/BC,OAAO,EAAE,CAACL,IAAI,GACRH,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEQ,OAAO,GAAAC,aAAA,CAAAA,aAAA,KACpBT,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEQ,OAAO;QAAEL;MAAI,EAAE;MAC5CO,IAAI,EAAAD,aAAA;QAAIE,UAAU,EAAE,CAAC;MAAC,GAAKX,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEU,IAAI;IACrD,CAAC,CAAC;IACF,OAAO;MAAEE,KAAK,EAAEP,KAAK;MAAEF,IAAI,EAAEC;IAAQ,CAAC;EAC1C,CAAC,EAAE,CAACJ,gBAAgB,EAAEC,IAAI,CAAC,CAAC;EAC5B,MAAM;IAAEY,oBAAoB;IAAEC;EAAS,CAAC,GAAGxB,kBAAkB,CAACY,YAAY,EAAE,IAAI,CAAC;EACjF,MAAMG,KAAK,GAAGhB,0BAA0B,CAAC,MAAM,EAAEwB,oBAAoB,EAAEb,gBAAgB,CAACO,MAAM,CAACQ,SAAS,CAAC;EACzG,MAAM,CAACpB,KAAK,EAAEC,WAAW,EAAEC,OAAO,CAAC,GAAGN,aAAa,CAACsB,oBAAoB,EAAEpB,uBAAuB,CAAC;EAClG,OAAO;IACHE,KAAK;IACLC,WAAW;IACXC,OAAO;IACPiB,QAAQ;IACRT;EACJ,CAAC;AACL,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}